<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Map Manager : Fitting segments in Fiji</title>
        <meta name="description" content="">

        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/mapmanager/css/syntax.css">
        <link rel="stylesheet" href="/mapmanager/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <div class=no-print>

<div style="float: right;"><A HREF="search.html">Search...</A></div>

<h4>
	<a class=brand href="/mapmanager/">Map Manager</a>
    <small></small>
</h4>


<!--
<div float=right>
<a href="javascript:window.print()" float=right>print</a>
</div>
-->



</div>

                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <!-- <li><a href="/mapmanager/">Home</a></li> -->
    <BR>
    
    
        
        

        
            
                <li class=nav-header>Workflows</li>
            
            <li data-order="5"><a href="/mapmanager/gallery">Gallery</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/getting-started">Getting started</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/making-a-map">Making a map</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/annotating-a-stack">Annotating a stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Imaging Core</li>
            
            <li data-order="4"><a href="/mapmanager/fitting-segments-in-fiji">Fitting segments in Fiji</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/stackdb-plot">Stack DB plot</a></li>
        
            
            <li data-order="6"><a href="/mapmanager/layout-panel">Layout panel</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/contrast-panel">Contrast panel</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/stack-browser">Stack Browser</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/stack">Stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Interface Windows</li>
            
            <li data-order="4"><a href="/mapmanager/find-points-panel">Find Points</a></li>
        
            
            <li data-order="6"><a href="/mapmanager/hdd-paths">Hard Drive Paths</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/stackdb-options-panel">Options</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/search-panel">Search panel</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/plot-panel">Plot panel</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/main-panel">Main panel</a></li>
        
    
        
        

        
            
                <li class=nav-header>Plots</li>
            
            <li data-order="1"><a href="/mapmanager/stack-plot">Stack plot</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/run-plot">Run plot</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/map-plot">Map plot</a></li>
        
    
        
        

        
            
                <li class=nav-header>Analysis</li>
            
            <li data-order="1"><a href="/mapmanager/reports">Reports</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/intensity">Intensity</a></li>
        
    
        
        

        
            
                <li class=nav-header>Blog Posts</li>
            
            <li data-order="2"><a href="/mapmanager/release-notes">Release Notes</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/faq">FAQ</a></li>
        
            
            <li data-order=""><a href="/mapmanager/file-format">File format</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/user-files">User files</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/database-overview">Database overview</a></li>
        
    


<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

<!--    <A HREF="search.html">Search...</A> -->

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h3>Fitting segments in Fiji
        
    </h3>
</div>

<p>Line segments are fit in FIJI using Map Manager specified control points.</p>

<h3 id="the-version-of-fiji-is-critical">The version of Fiji is critical</h3>

<p>You are required to use <font color="red"><strong>ImageJ 1.47v</strong></font>, this corresponds to the <font color="red"><strong>'Fiji Life-Line version, 2013 July 15'</strong></font> on the main <a href="http://fiji.sc/Downloads">FIJI download page</a>.</p>

<h3 id="download-fiji-life-line-version-2013-july-15">(1) Download ‘Fiji Life-Line version, 2013 July 15’</h3>
<ul>
  <li>Mac: http://fiji.sc/downloads/Life-Line/fiji-macosx-20130715.dmg</li>
  <li>Windows (64bit): http://fiji.sc/downloads/Life-Line/fiji-win64-20130715.zip</li>
  <li>Windows (32-bit): http://fiji.sc/downloads/Life-Line/fiji-win32-20130715.zip</li>
</ul>

<p>Once downloaded and installed/uncompressed, drag and drop the <a href="images/Bob_Neurite_Tracer_v3.java">Bob_Neurite_Tracer_v3.java</a> plugin to the ‘plugins’ folder inside the newly created Fiji.app application folder.</p>

<p class="important"><b>Important.</b> Do <b>NOT</b> put Fiji.app into any path with spaces. Do not put Fiji.app in 'Program Files'.</p>

<p>If you already have a newer version of Fiji installed, this is fine as two versions of Fiji can be installed. They just have to be in different hard-drive folders.</p>

<p>The reason we use this older version of Fiji is that newer versions of Fiji have undocumented changes to the backend JAVA programming interface. Until this is resolved, we will continue to use the older version of Fiji.</p>

<h3 id="installing-the-bobneuritetracerv3java-plugin">(2) Installing the ‘Bob_Neurite_Tracer_v3.java’ plugin</h3>

<p>When you fit a line in Fiji from within Map Manager, you are using the Fiji plugin Bob_Neurite_Tracer_v3.java</p>

<p>To install this plugin</p>

<ol>
  <li>Download <a href="images/Bob_Neurite_Tracer_v3.java">Bob_Neurite_Tracer_v3.java</a> or from our <a href="https://github.com/cudmore/bob-fiji-plugins">Github repository</a>.</li>
  <li>Copy Bob_Neurite_Tracer_v3.java into your Fiji ‘plugins’ folder.</li>
</ol>

<h3 id="configuring-map-manager-to-fit-a-line-in-fiji">(3) Configuring Map Manager to fit a line In Fiji</h3>

<p>You need to specify the location of your Fiji program from within Map Manager. This is most easily done using the <a href="hdd-paths">Hard Drive Paths</a> panel.</p>

<ul>
  <li>Open the <a href="hdd-paths">HDD Paths</a> panel using the main menu ‘MapManager - Hard Drive Paths’.</li>
  <li>In the Map Manager HD Paths panel, specify the path to your <strong>Fiji Application</strong> with the corresponding <strong>Set</strong> button.</li>
  <li>In the main <a href="stackdb-options-panel">Options Panel</a>, save the global options with the <strong>Save</strong> button. The next time Map Manager is run, it will remember and use this Fiji path.</li>
</ul>

<p><img class="img-float-left" src="images/mm3/mm3-hdd-paths.png" width="650" /></p>

<div class="print-page-break"></div>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>If line fits do not work from within Map Manager, please check the following</p>

<ul>
  <li>You are using the ‘Fiji Life-Line version, 2013 July 15’.</li>
  <li>Your Fiji.app folder can not be in a folder with any spaces or special characters in its path (this includes ‘Program Files’).</li>
  <li>You have downloaded and install the ‘Bob_Neurite_Tracer_v3.java’</li>
  <li>You have specified your Fiji path within Map Manager using ‘MapManager - Hard Drive Paths’.</li>
</ul>

<p>The location of the Fiji program can also be specified in a Map Manager <a href="user-files">User File</a>. The user file needs to contain a line like this…</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Specify the location of your Fiji executable.
# Please use 'Fiji Life-Line version, 2013 July 15'.
# mac
root:stackdb2:options:gFijiPath="/Users/cudmore/Fiji.app/Contents/MacOS/Imagej-macosx"
# windows
# root:stackdb2:options:gFijiPath="C:\Users\cudmore.linden-image2\Desktop\Fiji.app\fiji-win64.exe"
</code></pre>
</div>

<p>Make sure the actual Fiji executable exists. Don’t assume the name of Fiji is ‘fiji-win64.exe’, this name changes from version to version of Fiji. If there is an error in this path, there WILL be an error when fitting lines in Map Manager.</p>



<div class="post-tags">
  
  
  
  
  

   <!--
   <a href="javascript:window.print()">print</a>
    -->

   <!--
   <BR>
   <a href="_posts/2015-05-21-fitting-segments-in-fiji.pdf">print pdf</a>
   <BR>
   -->
    
</div>


                    </div>
                
            </div>

            

            <div class=row-fluid>
                <div id=footer class=span12>
                      Copyright &copy; 2016 - Robert Cudmore -

 <a href="http://robertcudmore.org/index.html">robertcudmore.org</a>

<!--
Documentation for <a href="https://github.com/cudmore/mapmanager">Map Manager</a>
-->
                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                    
                    //console.log(order, li);
                }

                //20160327 removed, this was no doing anything???
                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    //console.log(section);
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
