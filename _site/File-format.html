<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Map Manager : File format</title>
        <meta name="description" content="">

        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/mapmanager/css/syntax.css">
        <link rel="stylesheet" href="/mapmanager/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <div class=no-print>

<div style="float: right;"><A HREF="search.html">Search...</A></div>

<h4>
	<a class=brand href="/mapmanager/">Map Manager</a>
    <small></small>
</h4>


<!--
<div float=right>
<a href="javascript:window.print()" float=right>print</a>
</div>
-->



</div>

                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <!-- <li><a href="/mapmanager/">Home</a></li> -->
    <BR>
    
    
        
        

        
            
                <li class=nav-header>Workflows</li>
            
            <li data-order="5"><a href="/mapmanager/gallery">Gallery</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/getting-started">Getting started</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/making-a-map">Making a map</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/annotating-a-stack">Annotating a stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Imaging Core</li>
            
            <li data-order="4"><a href="/mapmanager/fitting-segments-in-fiji">Fitting segments in Fiji</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/stackdb-plot">Stack DB plot</a></li>
        
            
            <li data-order="6"><a href="/mapmanager/layout-panel">Layout panel</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/contrast-panel">Contrast panel</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/stack-browser">Stack Browser</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/stack">Stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Interface Windows</li>
            
            <li data-order="2"><a href="/mapmanager/point-list">Point List</a></li>
        
            
            <li data-order="4"><a href="/mapmanager/find-points-panel">Find Points</a></li>
        
            
            <li data-order="6"><a href="/mapmanager/hdd-paths">Hard Drive Paths</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/time-series-panel">Time Series Panel</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/stackdb-options-panel">Options</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/search-panel">Search panel</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/plot-panel">Plot panel</a></li>
        
    
        
        

        
            
                <li class=nav-header>Plots</li>
            
            <li data-order="1"><a href="/mapmanager/stack-plot">Stack plot</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/run-plot">Run plot</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/map-plot">Map plot</a></li>
        
    
        
        

        
            
                <li class=nav-header>Analysis</li>
            
            <li data-order="4"><a href="/mapmanager/Map-Pool">Map Pool</a></li>
        
            
            <li data-order="4"><a href="/mapmanager/Plotting">Plotting</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/Algorithms">Algorithms</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/reports">Reports</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/intensity">Intensity</a></li>
        
    
        
        

        
            
                <li class=nav-header>Blog Posts</li>
            
            <li data-order="2"><a href="/mapmanager/release-notes">Release Notes</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/faq">FAQ</a></li>
        
            
            <li data-order=""><a href="/mapmanager/file-format">File format</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/user-files">User files</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/database-overview">Database overview</a></li>
        
    


<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

<!--    <A HREF="search.html">Search...</A> -->

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h3>File format
        
    </h3>
</div>

<style>
table{
    padding: 5px;
    border:1px solid #000000;
}

th{
    border:1px solid #000000;
    background-color: #dddddd;
    color: black;
}

td{
    border:1px solid #000000;
    padding: 5px;
}
</style>

<p>Map Manager saves all <a href="stack">stack</a> and time-series <a href="time-series-panel">map</a> files as plain text files. In this way, annotations created in Map Manager can easily be opened in a wide range of other programming environments for additional visualization and analysis.</p>

<p>As an example of this, we have created a Python package <a href="#pymapmanager_package">PyMapManager</a>.</p>

<p>Please note, Map Manager never modifies raw .tif files, it only makes copies (in the case of a map).</p>

<p><img class="img-float-right" src="images/mm3/file-format/stack-hard-drive.png" width="450" /></p>

<h3 id="single-time-point-files">Single time-point files</h3>
<ul>
  <li>The original .tif file is never modified</li>
  <li>Annotations are saved in a stackdb folder
    <ul>
      <li>db2</li>
      <li>int1</li>
      <li>int2</li>
      <li>line</li>
    </ul>
  </li>
</ul>

<h4 id="stackdb">stackdb</h4>

<h4 id="int1-and-int2">int1 and int2</h4>

<h4 id="line">line</h4>

<div class="print-page-break"></div>

<p><img class="img-float-right" src="images/mm3/file-format/map-hard-drive.png" width="450" /></p>

<h3 id="map-files">Map files</h3>

<ul>
  <li>Maps are saved in a folder whose name is the same as the map name</li>
  <li>At the root of this folder are three map files
    <ul>
      <li>map. see <a href="#map_file">format</a></li>
      <li>object map</li>
      <li>segment map (if there are segment)</li>
    </ul>
  </li>
  <li>There are some folders
    <ul>
      <li>line</li>
      <li>raw: The original .tif files are never modified, these are direct copies.</li>
      <li>stackdb</li>
    </ul>
  </li>
</ul>

<div class="print-page-break"></div>

<h4 id="map">map</h4>

<h4 id="object-map">object map</h4>

<h4 id="segment-map">segment map</h4>

<h4 id="stack-db">stack db</h4>

<h4 id="line-1">line</h4>

<h3 id="a-idpymapmanagerpackageapymapmanager-package"><a id="pymapmanager_package"></a>PyMapManager package</h3>

<p>Map Manager saves files as plain text. Thus, it is relatively easy to extend the function of Map Manager by writing Python (or Matlab) code to load, parse, and analyze these text files. This is a very rapid and effective route to extending the functions of Map Manager with new analysis particular to your own data and ideas.</p>

<ul>
  <li><a href="https://github.com/cudmore/PyMapManager/">PyMapManager on GitHub</a></li>
  <li>PyMapManager <a href="http://blog.cudmore.io/PyMapManager/">API documentation</a></li>
  <li>IPython notebook <a href="https://github.com/cudmore/PyMapManager/tree/master/PyMapManager/examples">examples</a></li>
</ul>

<p>If you are on a Mac, python comes pre-installed and you are good to go. In general, <a href="https://www.continuum.io/what-is-anaconda">Anaconda</a> is a useful starting point as it pre-installes most Python packages you might need. Download Anaconda <a href="http://continuum.io/downloads">here</a>.</p>

<h3 id="future-hdf5">[FUTURE] HDF5</h3>

<p><a href="https://www.hdfgroup.org/HDF5/">HDF5</a> is an open source cross platform binary file format. It can be read from <a href="http://www.mathworks.com/help/matlab/hdf5-files.html">Matlab</a>, <a href="http://www.h5py.org">Python</a>, <a href="http://www.wavemetrics.com/products/igorpro/dataaccess/hdf5.htm">Igor Pro</a> and from a <a href="https://www.hdfgroup.org/products/hdf5_tools/# h5dist">command line</a>.</p>

<p>Out of the box, Map Manager is not saving files in the HDF5 format. If you are interested in turning on this feature, please email Robert Cudmore.</p>

<h3 id="each-file-has-the-following-format">Each file has the following format</h3>

<h4 id="a-idmapfileamap-file-format"><a id="map_file"></a>Map file format</h4>

<table>
  <thead>
    <tr>
      <th>index</th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>hsType</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
      <td>mm3</td>
    </tr>
    <tr>
      <td>hsStack</td>
      <td>rr30a_s0</td>
      <td>rr30a_s1</td>
      <td>rr30a_s2</td>
      <td>rr30a_s3</td>
      <td>rr30a_s4</td>
      <td>rr30a_s5</td>
      <td>rr30a_s6</td>
      <td>rr30a_s7</td>
      <td>rr30a_s8</td>
    </tr>
    <tr>
      <td>hsdb</td>
      <td>rr30a_s0_db2</td>
      <td>rr30a_s1_db2</td>
      <td>rr30a_s2_db2</td>
      <td>rr30a_s3_db2</td>
      <td>rr30a_s4_db2</td>
      <td>rr30a_s5_db2</td>
      <td>rr30a_s6_db2</td>
      <td>rr30a_s7_db2</td>
      <td>rr30a_s8_db2</td>
    </tr>
    <tr>
      <td>hsStackNV</td>
      <td>rr30a_s0</td>
      <td>rr30a_s1</td>
      <td>rr30a_s2</td>
      <td>rr30a_s3</td>
      <td>rr30a_s4</td>
      <td>rr30a_s5</td>
      <td>rr30a_s6</td>
      <td>rr30a_s7</td>
      <td>rr30a_s8</td>
    </tr>
    <tr>
      <td>date</td>
      <td>20141009</td>
      <td>20141013</td>
      <td>20141016</td>
      <td>20141017</td>
      <td>20141018</td>
      <td>20141020</td>
      <td>20141021</td>
      <td>20141022</td>
      <td>20141029</td>
    </tr>
    <tr>
      <td>time</td>
      <td>20:01:40</td>
      <td>22:24:04</td>
      <td>19:49:05</td>
      <td>20:30:39</td>
      <td>16:18:59</td>
      <td>19:25:41</td>
      <td>18:36:19</td>
      <td>19:47:00</td>
      <td>19:05:27</td>
    </tr>
    <tr>
      <td>hsStackSeconds</td>
      <td>3495729700</td>
      <td>3496083844</td>
      <td>3496333745</td>
      <td>3496422639</td>
      <td>3496493939</td>
      <td>3496677941</td>
      <td>3496761379</td>
      <td>3496852020</td>
      <td>3497454327</td>
    </tr>
    <tr>
      <td>fiducPnt</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>numChannels</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <td>defaultChannel</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <td>px</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
    </tr>
    <tr>
      <td>py</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
      <td>1024</td>
    </tr>
    <tr>
      <td>pz</td>
      <td>70</td>
      <td>65</td>
      <td>70</td>
      <td>70</td>
      <td>70</td>
      <td>80</td>
      <td>70</td>
      <td>80</td>
      <td>70</td>
    </tr>
    <tr>
      <td>dx</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
    </tr>
    <tr>
      <td>dy</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.12</td>
    </tr>
    <tr>
      <td>dz</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>stackdbVersion</td>
      <td>20151224</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>numSeg</td>
      <td>5</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>numObj</td>
      <td>2467</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>numSpine</td>
      <td>1227</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>importedStackName</td>
      <td>RR30a_S0</td>
      <td>RR30a_S1</td>
      <td>RR30a_S2</td>
      <td>RR30a_S3</td>
      <td>RR30a_S4</td>
      <td>RR30a_S5</td>
      <td>RR30a_S6</td>
      <td>RR30a_S7</td>
      <td>RR30a_S8</td>
    </tr>
    <tr>
      <td>condStr</td>
      <td>a1</td>
      <td>a2</td>
      <td>e</td>
      <td>b1</td>
      <td>b2</td>
      <td>b</td>
      <td>c1</td>
      <td>c2</td>
      <td>c3</td>
    </tr>
    <tr>
      <td>zeroSession</td>
      <td>0</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>sessions</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>7</td>
      <td>8</td>
    </tr>
    <tr>
      <td>datetime</td>
      <td>3495729700</td>
      <td>3496083844</td>
      <td>3496333745</td>
      <td>3496422639</td>
      <td>3496493939</td>
      <td>3496677941</td>
      <td>3496761379</td>
      <td>3496852020</td>
      <td>3497454327</td>
    </tr>
    <tr>
      <td>days</td>
      <td>0</td>
      <td>4.0989</td>
      <td>6.9913</td>
      <td>8.0201</td>
      <td>8.8454</td>
      <td>10.975</td>
      <td>11.941</td>
      <td>12.99</td>
      <td>19.961</td>
    </tr>
    <tr>
      <td>hours</td>
      <td>0</td>
      <td>98.373</td>
      <td>167.79</td>
      <td>192.48</td>
      <td>212.29</td>
      <td>263.4</td>
      <td>286.58</td>
      <td>311.76</td>
      <td>479.06</td>
    </tr>
    <tr>
      <td>zsessions</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>7</td>
      <td>8</td>
    </tr>
    <tr>
      <td>zdays</td>
      <td>0</td>
      <td>4.0989</td>
      <td>6.9913</td>
      <td>8.0201</td>
      <td>8.8454</td>
      <td>10.975</td>
      <td>11.941</td>
      <td>12.99</td>
      <td>19.961</td>
    </tr>
    <tr>
      <td>zhours</td>
      <td>0</td>
      <td>98.373</td>
      <td>167.79</td>
      <td>192.48</td>
      <td>212.29</td>
      <td>263.4</td>
      <td>286.58</td>
      <td>311.76</td>
      <td>479.06</td>
    </tr>
    <tr>
      <td>mapCond</td>
      <td>mc1</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>



<div class="post-tags">
  
  
  
    <b>Tags:</b>  
  
  
  
    <a href="/mapmanager/tags/#xxx">xxx</a>
  

   <!--
   <a href="javascript:window.print()">print</a>
    -->

   <!--
   <BR>
   <a href="_posts/2015-05-28-file-format.pdf">print pdf</a>
   <BR>
   -->
    
</div>


                    </div>
                
            </div>

            

            <div class=row-fluid>
                <div id=footer class=span12>
                      Copyright &copy; 2017 - Robert Cudmore -

 <a href="http://robertcudmore.org/index.html">robertcudmore.org</a>

<!--
Documentation for <a href="https://github.com/cudmore/mapmanager">Map Manager</a>
-->
                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                    
                    //console.log(order, li);
                }

                //20160327 removed, this was no doing anything???
                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    //console.log(section);
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
