<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Map Manager : Run plot</title>
        <meta name="description" content="">

        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/mapmanager/css/syntax.css">
        <link rel="stylesheet" href="/mapmanager/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <div class=no-print>

<div style="float: right;"><A HREF="search.html">Search...</A></div>

<h4>
	<a class=brand href="/mapmanager/">Map Manager</a>
    <small></small>
</h4>


<!--
<div float=right>
<a href="javascript:window.print()" float=right>print</a>
</div>
-->



</div>

                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <!-- <li><a href="/mapmanager/">Home</a></li> -->
    <BR>
    
    
        
        

        
            
                <li class=nav-header>Workflows</li>
            
            <li data-order="1"><a href="/mapmanager/getting-started">Getting started</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/making-a-map">Making a map</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/annotating-a-stack">Annotating a stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Imaging Core</li>
            
            <li data-order="3"><a href="/mapmanager/stack-annotations">Stack Annotations</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/stack">Stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Interface Windows</li>
            
            <li data-order="4"><a href="/mapmanager/point-list">Point List</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/find-points-panel">Find Points</a></li>
        
            
            <li data-order="8"><a href="/mapmanager/hdd-paths">Hard Drive Paths</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/time-series-panel">Time Series</a></li>
        
            
            <li data-order="7"><a href="/mapmanager/stackdb-options-panel">Options</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/search-panel">Search</a></li>
        
            
            <li data-order="10"><a href="/mapmanager/plot-panel">Plot panel</a></li>
        
            
            <li data-order="9"><a href="/mapmanager/layout-panel">Layout panel</a></li>
        
            
            <li data-order="6"><a href="/mapmanager/contrast-panel">Contrast panel</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/stack-browser">Stack Browser</a></li>
        
    
        
        

        
            
                <li class=nav-header>Plots</li>
            
            <li data-order="1"><a href="/mapmanager/stack-plot">Stack plot</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/run-plot">Run plot</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/map-plot">Map plot</a></li>
        
    
        
        

        
            
                <li class=nav-header>Analysis</li>
            
            <li data-order="4"><a href="/mapmanager/Map-Pool">Map Pool</a></li>
        
            
            <li data-order="4"><a href="/mapmanager/Plotting">Plotting</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/Algorithms">Algorithms</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/reports">Reports</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/intensity">Intensity</a></li>
        
    
        
        

        
            
                <li class=nav-header>Blog Posts</li>
            
            <li data-order="2"><a href="/mapmanager/map-manager-matlab">Map Manager Matlab</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/fiji-plugins">Fiji plugins</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/release-notes">Release Notes</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/gallery">Gallery</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/faq">FAQ</a></li>
        
            
            <li data-order=""><a href="/mapmanager/file-format">File format</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/database-overview">Database overview</a></li>
        
    


<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

<!--    <A HREF="search.html">Search...</A> -->

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h3>Run plot
        
    </h3>
</div>

<p>A run plot is a sequence of <a href="stack">stack</a> windows, one for each session in a timeseries. The purpose of a run plot is to visualize the dynamics between annotations. The image below shows a run plot of spines. Spine # 201 is selected in each of three stack windows corresponding to timepoints.</p>

<p><img class="img-float-center" src="images/mm3/example-spine-run.png" width="800" /></p>

<div class="print-page-break"></div>

<h3 id="opening-a-run-plot">Opening a run plot</h3>

<p><img class="img-float-right" src="images/mm3/run-plot-menu.png" width="120" style="border:1px solid black" /></p>

<p>To open a run plot of annotations, right-click on an annotation and select ‘Plot Run +- …’. This will work in all <a href="map-plot">map plots</a> and <a href="search-panel">search</a> results.</p>

<p>All run plots will have the timepoint of the selected annotation as the center window. The different options (+- 1, +- All, +- n) lets you choose how many timepoints before and after the selected timepoint.</p>

<p>There are three types of run plots:</p>

<ol>
  <li><strong>Annotation Run.</strong> Connected (persistent) annotations are centered and zoomed across sessions in a timeseries. Open an annotation run plot by right-clicking an annotation in a <a href="map-plot">map plot</a>.</li>
  <li><strong>Stack Run.</strong> A run plot showing the sequence of stacks in a timeseries. Open a stack run plot by right-clicking a session in the main <a href="time-series-panel">time series</a> panel.</li>
  <li><strong>Segment Run.</strong> Connected (persistent) segments are selected across sessions in a timeseries. Open a segment run plot by right-clicking a segment in a segment plot. There is currently only one type of segment plot and it is opened using the ‘Segment Map’ button in the main <a href="time-series-panel">time series</a> panel. This is only for spine annotations that have segment tracings.</li>
</ol>

<div class="print-page-break"></div>

<h3 id="navigating-a-run-plot">Navigating a run plot</h3>

<p>Each <a href="stack">stack</a> window in a run plot behaves just like an individual stack window. For example, shift+click will create a new annotation. In addition, run plot stack windows have some added features.</p>

<h4 id="aligning-a-run-plot-to-a-selected-annotation">Aligning a run plot to a selected annotation</h4>
<p><strong>Control+click</strong> on an annotation in one stack window of a run plot will select, center, and zoom that annotation in all stack windows of the run plot. If a stack at a given timepoint is missing the annotation (for example, the object was subtracted), the image will center and zoom to the region where the annotation ‘would be’.</p>

<h4 id="linking-all-the-stack-windows-in-a-run-plot">Linking all the stack windows in a run plot</h4>
<p><strong>Keyboard-l</strong> (that is lower-case ‘l’ as in ‘link’) will visually link all stack windows in a run such that panning, zooming, or setting the slice in one window will propagate to all other stack windows in the run. Linking can be turned on and off again by pressing keyboard-l.</p>

<h3 id="editing-annotation-dynamics-in-a-run-plot">Editing annotation dynamics in a run plot</h3>

<p>The dynamics between annotations and segments can be edited in a run plot.</p>

<ul>
  <li>Keyboard <kbd>a</kbd> : The selected annotation becomes <strong>a</strong>dded.</li>
  <li>Keyboard <kbd>s</kbd> : The selected annotation becomes <strong>s</strong>ubtraced</li>
  <li>Keyboard <kbd>p</kbd> : The selected annotations become <strong>p</strong>ersistent. This requires a selection in the previous timepoint.</li>
  <li>Keyboard <kbd>b</kbd> : The selected annotation is tagged as <strong>b</strong>ad. Bad tags are only available for annotations, not for segments.</li>
</ul>

<p><strong>Persistent is a special case.</strong> When two annotations are connected between two sequential timepoints/sessions we refer to them as ‘persistent’. To connect two annotations and make them persistent, both annotations need to be selected (in their respective timepoints) and the annotations in the <b>latter</b> timepoint needs to be marked persistent with keyboard <kbd>p</kbd>.</p>

<p><span style="color:red">Important:</span> The keyboard commands a/s/p will default to editing the dynamics of annotations. To edit the dynamics between segments, turn on ‘Segments’ edit.</p>

<p>All of these keyboard commands have corresponding right-click contextual menus. Select an annotation and right-click to open the contextual menu.</p>

<h3 id="reading-annotation-labels-in-a-run-plot">Reading annotation labels in a run plot</h3>

<p>The dynamics of each annotation is encoded in the color of its label, <span style="color:green">green</span> for addition, <span style="color:red">red</span> for subtraction, and <span style="color:yellow">yellow</span> for persistent. Persistent annotations are connected between timepoints, we call this a run. Annotations that are in the same run will be labelled with the same number in each of the stack windows of a run plot. Added annotation get a new label number. This system is designed to quickly visualize the connectivity between annotations.</p>

<p><img class="img-float-left" src="images/mm3/mm3-run-segment-example.png" width="700" /></p>

<div class="print-page-break"></div>

<p>Example run plot following a spine (yellow circle) through multiple timepoints in a map.</p>

<p><img class="img-float-left" src="images/mm3/mm3-run-segment-example2.png" width="700" /></p>

<div class="print-page-break"></div>

<p>Same run plot as above after zooming in. All stacks in a run plot can be synchronized with keyboard ‘l’ (as in Link) so that zooming, panning, and setting the slice in one stack window of the run will propagate to all other stack windows of that run.</p>

<div class="print-page-break"></div>

<p><img class="img-float-left" src="images/mm3/mm3-segment-run.png" width="700" /></p>

<div class="print-page-break"></div>

<p>A segment run plot with the same segment selected in all timepoints. Note the difference in scale compared to the spine run examples. All scale bars are 5 um.</p>



<div class="post-tags">
  
  
  
    <b>Tags:</b>  
  
  
  
    <a href="/mapmanager/tags/#Plots">Plots</a>
  

   <!--
   <a href="javascript:window.print()">print</a>
    -->

   <!--
   <BR>
   <a href="_posts/2015-04-20-run-plot.pdf">print pdf</a>
   <BR>
   -->
    
</div>


                    </div>
                
            </div>

            

            <div class=row-fluid>
                <div id=footer class=span12>
                      Copyright &copy; 2017 - Robert Cudmore -

 <a href="http://robertcudmore.org/index.html">robertcudmore.org</a>

<!--
Documentation for <a href="https://github.com/cudmore/mapmanager">Map Manager</a>
-->
                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                    
                    //console.log(order, li);
                }

                //20160327 removed, this was no doing anything???
                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    //console.log(section);
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
