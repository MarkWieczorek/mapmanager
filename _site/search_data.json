{
  

    "map-manager-matlab": {
      "title": "Matlab class library",
      "content"	 : "Map Manager - Matlab is an easy to use Matlab class library that will open and plot Map Manager (Igor) files. The reason we created this was to allow the user to extend the analysis of Map Manager annotations in the familiar Matlab environment.",
      "url": "/map-manager-matlab",
      "author": "",
      "category": "post",
      "date": "Oct 2017"
    }
    ,
  

    "fiji-plugins": {
      "title": "Fiji plugins",
      "content"	 : "Map Manager uses a number of custom Fiji plugins to convert raw data into a format that can be imported into Map Manager.Map Manager also has an internal Fiji plugin to fit dendritic segments.Fitting dendritic segmentsThis is done seemlesly from within Map Manager and only requires an installed Fiji program to be specified in hard drive paths.The Map Manager code to fit dendritic segments is a modified version of the Simple Neurite Tracer Fiji plugin.Converting raw 3D data to open in Map ManagerMap Manager can open 3D .tif image stack with 1, 2, or 3 color channels.  Map Manager will open single color channel 3D .tif files.  Map Manager will not open 3D volumes that have interleaved color channels.  Map Manager will not open 3D volumes saved as individual .tif filesFiji plugins are provided to make these conversions fast and easy.In all these plugins, great care was taken to extract the voxel size, date, and time. This is critical for rapid workflows to always score annotations in um and to make time-series in the correct order. If the voxel size, date, or time is not correct, please contact Robert Cudmore directly and we can make them work for your raw data.Important: When stacks are first imported into the stack browser, please verify the voxel size, date, and time are set correctly.Zeis LSM/CZIbFolder2MapManagerPrairie View (Bruker)bPrairie2tifScanImage (Vidrio)bFolder2MapManager",
      "url": "/fiji-plugins",
      "author": "",
      "category": "post",
      "date": "Oct 2017"
    }
    ,
  

    "map-pool": {
      "title": "Map Pool",
      "content"	 : "A map pool will plot multiple maps in the same plot and generate pooled statistics across these maps. The maps that go into a pool are specified by their ‘map condition’. In a normal map plot, the X-axis is often session or days. In a pooled plot, the X-axis is defined by each sessions ‘session condition’.A powerful additional feature is that individual spine values can be grouped (by their average) across multiple sessions in a map.Recipe to create a map pool  Specify ‘map conditions’ and ‘session conditions’ by turning on the ‘Edit Conditions’ checkbox  in main time-series window.  Open the pool plot panel from the main time-series window, ‘Pool’ button.  In the pool plot panel, specify a list of ‘map conditions’ and ‘session conditions’. Make sure the lists use ‘;’ as a separator.  In the pool plot panel, select a Y and X statistic to go into the pool.  In the pool plot panel, press ‘Make Group Pool’ to open a database window and a group plot window window.Note: The wildcard * character can be used when specifying ‘session conditions’. For example, if a few session are control sessions and they are labelled ‘c1’, ‘c2’, ‘c3’, creating a pool using c*; will average all CONNECTED spines across sessions c1/c2/c3 into a single group named c*.Pool Plot Panel      The maps and sessions that go into a pool are defined by the specified ‘map conditions’ and ‘session conditions’. If these map and session conditions are kept the same, a number of group plots with different x/y stats can be created (with ‘make group pool’) and they will all share the same Pool Database Window.        Each of these group plots can be returned to by selecting a plot in the ‘Pool ID’ popup and pressing the ‘Plot’ button.        Note: Grouped plots visualize the Y-stat versus ‘session conditions’ groups. The X-stat is used later to make Grouped Session Plot(s).  Pool Database Window  Selecting a ‘Cond’, ‘Map’, or ‘Seg’ in the database window will select the corresponding object in all opened Group Plot Window and Grouped Session Plot windows.  Individual conditions, maps, and segments can be turned on and off using the checkboxes. When this is done, the object is removed from the group plot window and does not contribute to statistics generated by the ‘stat table’ button.  Each map condition gets a color.  The color is shown by coloring the text for the condition in the pool database window and coloring the markers in the group plot windowGroup Plot Window.  The x-axis is the session conditions that went into the pool, we call these groups.  The y-axis is the Y-stat that went into the pool.  The marker colors indicate different map conditions.  Important: If the group plot was made using the wildcard * for session conditions (something like c*;), the individual markers in this plot are the AVERAGE of all connected spines within this session group.  Transform the Y-axis with ‘Transform’ popup. Transformations like % are normalized to the session condition group specified in the ‘Norm’ popup.  Make grouped session plot(s) using the ‘Session Plot’ button. This is where the original X-stat is finally used.  The ‘Stat Table’ button will generate a Grouped Plot Stat Table. The stats will always be derived from what is currently displayed in the plot. If the Y-Axis has been transformed to %, the stat table will contain mean/sd/se/n for %.  The ‘Edit Plot Values’ button wil generate a table with all the raw values currently displayed in the group plot window.Grouped Session Plot  Create a grouped session plot using the ‘session plot’ button in the group plot window.  Selecting an object in the grouped session plot will select the corresponding object in the group plot window and vice versa.  Keyboard ‘e’ will open a table of values displayed in the grouped session plot.For example, this is a Grouped Session Plot of: Y: b* % a* versus X: b* Raw. As always, the marker colors are indicating the map conditions.Grouped Plot Stat TableThe grouped plot stat table shows statistics (mean/sd/se/n) for the values currently displayed in the Group Plot Window. The stats are fairly thourough and are broken  into three blocks, the first block is mean/sd/se/n for map condition, the second block is for session condition, and the third is per segment.",
      "url": "/Map-Pool",
      "author": "",
      "category": "analysis",
      "date": "Aug 2017"
    }
    ,
  

    "plotting": {
      "title": "Plotting",
      "content"	 : "This was started on March 7, 2017 and is NOT FINISHEDThis is an overview. Please see the main Plot Panel, Stack Plot, and Map Plot.Map Manager plots values for each 3D annotation. Plots can be made from a stack, a map, and a pool of maps. These plots are very powerful because they are linked to the raw data. If a plot point looks suspicious, one can always return to the raw image data. Finally, these plots are powerful as they are publication ready.Plotting from a single stackFor a single stack, open the Point List window. Use the ‘Plot’ button to make Y vs X plots for values from the stack. Each point plotted is for a single 3D object (e.g. a spine). Right click on column row in the table and select ‘Set X Stat’ or ‘Set Y Stat’ to use the values in the column for plotting.Plotting from a mapUse the ‘Plot’ tab in the main time-series window. There are default plots provided here including ‘Spine Length’ as well as intensity measures such as:  Spine Sum: sSum  Spine Background Sum: sbSum  Background Subtracted Spine Sum: bssSum  Dendrite Sum: dSum  Dendrite Background Sum: dbSum  Background Subtracted Dendrite Sum: bsdSumAdvanced plotting with the Plot PanelOpen the main plot panel from the main time-series window using the ‘Plot’ button.The general idea is to select a Y value from the list, a corresponding X value and make a plot. All plots will show the values for individual 3D annotations (one annotation per point in the plot). There are two types of plots  Spine Plot Map - To plot a Y value versus an X map value such as days or hours. Add example  Session Plot (Map) - To plot values from 2 different sessions/timepoints. Use this to see how objects change from one time-point to the next. Add examplePlotting a map poolA map pool will make one plot holding data from a number of maps. There are two types of map pools, just like there are two types of plots.  Time-series pool - Map Pool (Time-Series)  Session pool - Map Pool(Sessions)The interface to creating a map pool from a number of open maps is in the Plot Panel.Plot Window InterfaceOnce a plot is made from a stack or a map, Map Manager provides a unified interface.  To get back to the raw stack. Select a point, right-click and choose a menu option.          Plot Stack      Plot Spine      Plot Run +/- 1      Plot Run +/- All      Plot Run +/- n        For spines, show only spines on a single dendrite or all dendrites. Do this by setting ‘Map Segment ID’ and/or the ‘All Segments’ checkbox.  Generate tables of numbers and statistics. Use the ‘Stats’ button. These can easily be copied and pasted into other analysis software.  Click and drag to visually select subsets of objects. There are three different selections, turn each one on with the 1/2/3 radio buttons. Once created, the ‘Stats’ button will include the statistics for these manual selections in the output table.Group PlotsGroup plots allow you to plot the mean for a spine across a number of sessions.  Specify session conditions for a map in main time-series window.  Specify a list of conditions to plot in main plot panel ‘Session Conditions’. This is a semicolon separated list and accepts ‘’ as a wildcard. For example ‘a;b;c’  Plot the group plot with the ‘Group Plot’ button in the main plot panel",
      "url": "/Plotting",
      "author": "",
      "category": "analysis",
      "date": "Mar 2017"
    }
    ,
  

    "algorithms": {
      "title": "Algorithms",
      "content"	 : "Map Manager uses a range of algorithms at different stages of the analysisWithin a single timepointCalculating distance along a segment and segment lengthEach point in the 3D tracing of a segment is assigned a 3D distance from the start of the segment. For calculating the total segment length, used in segment reports, the Z values of the 3D line segment fit are first smoothed. For a segment running parallel to a single image plane, the actual Z-values of the fitted 3D line tend to jump up and down between adjacent imaging planes. This causes an accumulation of erronious length and the total length is thus an overestimate of the ‘real’ length. By smoothing the Z values of a segment (before segment length calculation) we reduce this additive error.Connecting a spine to its segmentSpines are automatically connected to their respective dendritic segments by finding the line with the brightest pixels between the spine head and its segment.Starting from the closest point on the segment tracing, a number of candidate lines are drawn between the spine head and the nearby dendritic segment and the line with the brightest intensity is chosen. There will sometimes be errors in this calculation, especially when there is curvature in the dendritic segment, resulting in the starting point being mis-identified. These are easy to fix by right-clicking a spine, selecting ‘manually connect’ and then clicking on the center dendritic line to specify it connection point.The number of lines to search is a parameter.Line Points To Search When Connecting Spine/BoutonSpine intensity analysisSee intensity analysis.In a time-seriesFinding corresponding pointsPivot points are used to identify corresponding regions between image stacks in a time-series. Pivot points are regular 3D annotations that must be manually positioned to correspond to a structure that is present in each stack of a time-series. Map Manager can then snap to corresponding regions of an image in multiple timepoints by snapping to the same 3D offset with respect to each image stacks 3D pivot point.Connect points within this distance (um)Finding corresponding spinesDistance away from segment pivot point is used.Connect spines within this distance (um)",
      "url": "/Algorithms",
      "author": "",
      "category": "analysis",
      "date": "Jul 2016"
    }
    ,
  

    "point-list": {
      "title": "Point List",
      "content"	 : "The point list panel displays a list of points for one stack.To open a point list panel  Right-click a stack and select the menu ‘Windows … Point List’.  In a stack window, use the ‘Point List’ button in the left-panel. Open the left-panel with keyboard ‘[’.InterfaceSelect individual points in the list and the selection will propagate to open stack windows, stack plots and map plot windows. Use the center on selection checkbox to automatically snap selected objects in their stack windw.Keyboard ‘b’ will toggle the selected object between bad and good.When a point is selected, its text note will be displayed at the bottom of the window. The note can then be edited.Edit User TypeTurn on the ‘Edit User Type’ checkbox and the point list window will respond to the following keystrokes to set the value of ‘userType’:            Index      Key      Result                  0      u      Unknown              1      m      Mushroom              2      f      Filapodia              3      l      Long              4      s      Stubby                     Del      -clear the entry-      Counts for each of these user types are included for each segment in each segment report.Edit User 1/2/3Turn on the ‘Edit User 1/2/3’ checkbox and the point list window will respond to the following keystrokes:            Key      Sets      Meaning                  6      user1      Match              7      user2      No Match              8      user3      Partial Match              9      userBool1      Inverse Match              0      -clear all entries-      Clear      Counts for each of these user types are included for each stack in each stack report.PlottingRight-click a column header and select Quick Plot to plot that stat versus the sequential number of each spine. The sequential number of each spine is the order they were created in, it is not the order along the dendrite.Any two columns can be plotted as X and Y. Right click a column and select Set X Stat, then right-click another column and select Set Y Stat. Then use the main Plot button to plot X versus Y.For example, to plot ‘spine length 3d’ versus ‘background subtracted spine sum’.  Right-click on ‘sLen3d’ column and select ‘Set Y Stat’  Right-click on ‘ubssSum’ column and select ‘Set X Stat’  Click the main ‘Plot’ button.ColumnsTo make the table easier to read, columns can be turned on and off with the check-boxes in the Columns group.Clicking on a column header will sort the table by that column. Shit+click the column header to reverse sort. Right click a column header to plot the values in the column.The error column will display errors encountered while running intensity analysis.Here is a partial list of the meaning of each column. See intensity for a list of the meaning of additional columns.            Column      Meaning                  Idx      The row in the table              dbIdx      The row in the stack db              roiType      The type of the point (spineROI, controlPnt, otherROI)              isBad      A ‘1’ if the point is marked bad. Toggle this with keyboard ‘b’              intBad      A ‘1’ if the point ismarked intensity bad              z      The z-image plane the point is in              parentID      The segment number a point (spine) belongs to              nnDist      Distance (um) to the nearest spine.              dDist      The distance (um) along the segment the point (spine) is attached to.              pDist      Only for maps, the distance (plus or minus) away from the pivot point      ",
      "url": "/point-list",
      "author": "",
      "category": "interface",
      "date": "Jun 2016"
    }
    ,
  

    "release-notes": {
      "title": "Release Notes",
      "content"	 : "20171030Working on new version and have seeded it to the following people  Daisuke (Cirelli &amp;amp; Tononi, Wisc-Madison), 20171030  Richard (Huganir), 20171029  Zeng You (Linden), 20170818  Amit (Bergles), 20170817 (plus one earlier version from feb?)New Features  Each annotation can be tagged with 1 of 10 ‘user type’.          right-click on annotation in stack window      right-click on annotation in map to set run      search for user type      dynamics and survival report now break down dynamics based on user type      masks are automatically created and available in trajectory analysis        Survival report  Birth/death plot. Right-click on intensity plots  Map plot now has ‘transform’ to transform y-data to: Raw, %, Abs, Diff, etc  Buttons window to expose all the features of stack and map plots  Options panel noew has ‘default scoring’ for: spines, cell bodies, prairie line scan  Trajectory analysis          Uses concept of stack pivot (rather than segment pivot)      2d/3d distance is distance an annotation moves between timepoints      Cum 2d/3d distance      Masks are automatically created: added, subtracted, always present, user type, etc. etc.      Plot with mask allows plotting subsets of annotations: added, subtracted, user type, etc      Overlay mask over existing plot and get stats for each mask        New Fiji plugin to fit tracings (written in Jython) will work with all versions of FIji and does not require user to explicitly install a plugin  New Fiji plugins to convert raw data to .tif for import          Zeiss LSM/CZI      Prairie View        Matlab code to open, plot, and add new analysis to Map Manager files          see: https://github.com/cudmore/MapManager-Matlab      Improvements  When adding stacks to a map from Stack Browser, no longer need to open channels.  Map DB now searches 2x deep, will handle a folder with condition folders (that then have the maps)  Simplified interface to stack browser and time series. All column options are now in a right-click menu  Standardized voxel size in stack browser and time series, they are now: vx, vy, vz  Large rewrite of online help including recipes, stack, etcBug fixes  No longer allowed to delete an annotation while in ‘move’ or ‘manual connect’. This was causing unexpected results.  Intensity analysis channel 2, utssdtds was incorrect. See code comment ‘20171005 intensity bug in utssdtds’  fixed errors when initially opening search panel  fixed search for added20170123, Distributed MapManager to Zeng-You and Julia (Linden), Richard (Huganir)This is a major release with new features, improvements, and bug fixes. A full list of these will follow.20161012, Distributed MapManager to Julia (Linden)20160722. Distributed MapManager to Allen (Linden)20160630. Distributed MapManager to Mengnan (Huganir)20160422 Update (file version 20151224)This is a major release with new features, improvements, and bug fixes. The file format has not changed but the options have. Please remake your options!New Features  No more limitation on length of file names when importing into stack browser  Plot run +/- now has option to set ‘row’ of run  Added ‘Div’ option to plot panel.  Added option to normalize all spines to a constant value  Segment density report now has segment position information {zMin, zMax, zMean, zMedian, xyAngle, tort}  Main map manager panel now remembers its position  Main map plot now remembers its position  Conrol click on ‘close all windows’ will now close tables  Jumping spinesJumping spines are specified just like other persistent spines. select spines in both time-points and hit keyboard ‘p’. When you make jumping spines, the source and destination spines are required to be subtraction and addition respectively.  Added jumping to map searchImprovements  Fast left/right mouse click should no longer be a problem.  User clicks during long operations like opening a run should no longer be a problem.  Updated coloring of spines in map plot. If there is no previous segment, spines are no longer marked as added (green). If there is no next segment, spines are no longer marked as subtracted (red). Same rules for transient (blue).  Map Plot. Snapping a marquee rectangle and right-click to make a selection now prints the mean/sd/se/n for both x and y axis.  Map Plot. Snapping a marquee rectangle and right-click to make a selection now works for +/- from mask.  Stats button in map plot will now report grand mean of all spine masks in plot (previously was only per segment).  All spine dynamics now plot following colors and size specified in table in options panel.  The size of masks in map plots now follow ‘pntSel’ in main map manager options panel.  Revamped example user file. tried to make it clear that this can be empty and that values specified will over-ride setting in main options panel.  Added ‘dynamics’ menu to right-click in map plot.  Added ‘Edit Line’ menu to right-click in main stack window ‘Line Segments’.Bug Fixes  Fixed export to text. If there is an error during export. ‘Clear User’ then ‘Analyze User Map’ and try export again.  Replotting a run while existing run is linked will continue to correctly link  Linked windows +/- zoom now works when some windows have left control bar and some do not20160126New Features  Opening a stack will now display a floating dialog while stack is loading (it is yellow)  Exposed interface to set defaults for intensity background candidates.  We can now set # rows, # cols, row mult, col mult, and a boolean to include other side of dendrite. When you include candidates on the other side of the dendrite, you are doubling the # of candidated. Due to this increased analysis, spine/second is dropping down to ~8 spines/second  Added ‘segment ends’ search to return spines close to the end of each segmentNew Interface  Added ‘debug on error’ checkbox to the Intensity Tab. This turns ‘debug on error’ (global igor option) on/off to run intensity analysis for a map or a stack. You want to run intensity analysis with this OFF  added ‘export map’ to right-click of map list in main map manager panel  revamped search panel with two tabs: map and manual  reworked obj info window interface      - removed ‘analyze run’      - on ‘analyze’ we will now open ch1/ch2 if neccessary  control click on ‘Unload Stacks’ in main mapmanager panel to unload ALL stack across ALL open maps  added (density report, dynamics report) right-click to map in main map manager panel  added (scale, date/time) checkboxes to main map manager panel. This hides columns so you can see LONG ‘original names’General Improvements  Fixed user interface for clicking to set a manual position for intensity background      - clicking off the image does nothing      - if click results in roi going off image, we revert to last good background roi      - removed help text from main window and now display in igor command window  Rewrote ‘clear’ intensity analysis to be much faster.  Moved default plot window to left (was off screen to right for richard)  Rewrote ‘dynamics report’ to include 3d segment length and density. Previously lengths were calculated from 2d projections, now they are true 3d lengths. New columns are: {totalLen3d, goodLen3d, totalDen3d, goodDen3d}Bug Fixes  setting the segment pivot point will be correctly saved. Previous versions (not all of them) were not doing this correctly.  Fixed bug where the backbone roi was ‘looping around’ to previous backbone segment. This was happening for spines at the beginning of a segment (not at the end). Now, spines at both the beginning and end of a segment get the correct backbone ROI.  fixed plot panel (ch1, ch2, dyn) checkboxes, they now generate full stat lists including ‘u’ stats  [BUG] stat lists are using tp=0 to generate stats, if they are missing ‘u’, you will not get ‘u’ in stat list  fixed bug where right-click below segment list (in left control panel of stack window) would sometime give an errorKnown Bugs  ‘Export map’ has a bug if size of int analysis is different between stacks in a map. This happens if int analysis fails half way through and user ‘u’ stats are added to some but not other stacks. Solution is to clear and then re analyze intensity for the offending stacks. Be careful, when you clear, you lose your manual setting (individual spine background position, spine width, etc).20160119 Update (sent to users on 20160115 / 20160118)This is the first MapManager version of intensity analysisNew Features  Complete rewrite of intensity analysis  Depending on the size of your stacks, intensity analysis should do ~15 spines/sec for large stacks and ~50 spines/sec for smaller stack. Loading stacks is the rate limiting factor.  Spine roi is drawn using the longest spine length in each run  Added intensity bad. Can be set for each spine. Spines marked ‘intensity bad’ can be toggled in all plots.  Each spine has errors and warnings if intensity analysis had problems. Search for ‘errors and warnings’ to decide what to do with the errors. Most of the time you will set ‘Intensity Bad’  Intensity Analysis Errors occur when          spine roi is off image      backbone roi had to be shortened (near end of dendrite)      background roi not found because all candidates are off image        Intensity analysis should be run with ‘Procedure - Debug On Error’ off  Added ‘Save Map As…’ to save an entire map under a new name. Use Map Manager Panel - Utility - Save Map As…New Interface  Search - Errors &amp;amp; warnings  Search - V Spines. Will search spines that have spine head above/below the backbone line connection point  Search - ROI Bounds. Will search for spines that have background spine ROI near edge of image.Known bugs  [FIXED] Spine density in a map is using 2D projection of line  [checked and seems to work] RIght-click menu items with ‘tab’ might not work on windows. For example ‘Reset Zoom   [enter]’  [FIXED] changing a spine (e.g. ‘move’) does not set intensity dirty for other spines in run  [FIXED] editing spine dynamics (add/subtract/persist) needs to mark all effected spines as ‘intensity dirty’  After int analysis, if no background is found (error #99) it is not possible to have user set manual background20150731 Sent first version of Map Manager to Richard and Yong  This is a COMPLETE rewrite of original bSpine program that was used in Zhang et al, 2015.  Did not hear back",
      "url": "/release-notes",
      "author": "",
      "category": "post",
      "date": "Apr 2016"
    }
    ,
  

    "gallery": {
      "title": "Gallery",
      "content"	 : "Linking timepoints in a time-series   Your browser does not support the HTML5 video element   Your browser does not support the HTML5 video elementAnnotating a stackSee - Stack - Stack browser - Annotating a stackAnnotating a time seriesSee - Run plot - Making a map",
      "url": "/gallery",
      "author": "",
      "category": "post",
      "date": "Nov 2015"
    }
    ,
  

    "find-points-panel": {
      "title": "Find Points",
      "content"	 : "The find points panel allows you to browse objects between two timepoints/sessions, will show you the best-guess for putative connections, and allow you to connect/disconnect objects across timepoints/sessions.To open the find points panel:  Right-click a spine in a map and selecting ‘Find Points’.  Right-click a session in the time-series panel and selecting ‘Find Points’.  Right-click a map in the time-series panel and selecting ‘Find Points’.Overview  The find points panel displays a list of all spines in the source timepoint (sIdx). In this example there are 21 spines in the source timepoint.  For each spines in the source timepoint, it shows if it is connected to the destination timepoint (dIdx). It will color the dIdx cell red if there is no connection.  Any remaining spines in the destination timepoint (spines not connected to the source timepoint) will be displayed at the bottom of the list. In this example there are 3 of these spines.  Each spine in the source timepoint will also have a best ‘Guess’ connection in the ‘Guess’ column. For spines, this is using your ‘Segment Pivot’ for the two segments listed in Find Points and will connect spines across timepoints/sessions that are within ‘Connect spines within this distance (um)’. See the Map Manager Options Panel to set this.Interface  From TP. Source timepoint/session (From TP)  To. Destination timepoint/session (To timepoint)  Object Type. Select the type of objects to display.  ShowBad. If checked, bad points will be included in the list. Bad points will always have their ‘Idx’ column in red.  Segment ID. Limit the list to one segment ID.  All Segments. Generate the list for all segments. If you are connecting spines, leave this off (unchecked).  Refresh. Will refresh the Find Points list. [as of Nov 2015, there may be some edits to the map that do not refresh the list automatically.]Column NamesClicking on any column name will sort the list by the values in that column. Column names starting with ‘s’ are for the source timepoint (from TP), column names starting with ‘d’ are for the destination timepoint (to TP).  Idx - The row index in the table (no relation to object index).  sIdx - Source object stack db index.  sz - Source object z-depth  sParent - Source object parent segment.  spDist - Source object distance from pivot.  Guess - Automatically generated best guess for connection. This uses each objects distance from pivot (spDist and dpDist) and returns objects within X um, where X is specified by ‘Connect spines within this distance (um)’.  dIdx - Destination object stack db index.  dz - Destination object z-depth  dpDist - Destination object distance from pivot.  Dist - When two points are connected (both sIdx and dIdx are filled in), this is the distance between the two points measured as the distance between their two pivot points (spDist and dpDist).Interaction  Bring up a map run by right-clicking a row and selecting ‘Plot Run’.  Select an object in the list and it will be propagated to all run and map plots.  Use the keyboard to scroll through the list. The selected point will flash in all open windows.  Use left/right arrows to flash the selected object again.Using the keyboard to connect and disconnect objectsFor a selected row  ‘shift + right-arrow’ to commit the ‘Guess’ to the destination (dIdx). This will connect the source and destination objects together, making them persistent.  ‘del’ key to remove the connection. This will remove persistence between the source and destination objects.  ‘ctrl + p’ to set the selected point at the global pivot. This is not used for spines.TipsWhen used with a spine run, find points is a reliable way to check the connections between all objects in two timepoints.All objects in the source timepoint are in the list, followed by any remaining objects in destination timepoint that were not connected to an object in the source timepoints.By sorting the list with the source distance from pivot (spDist), you can step through all spines in the source timepoint sequentially along the dendritic segment.By sorting the list with the destination distance from pivot (dpDist), you get a sequential list of all objects in the destination timepoint.Example usage of find points panel. Here, we have a run of sessions 1/2/3 (top row). We have positioned the Find Points panel below the stack for session 2. By selecting rows (spines) in Find Points we can browse all spines in session 2, visualize their connections to session 3, and finally edit their connections to session 3 (using the keyboard in Find Points Panel).",
      "url": "/find-points-panel",
      "author": "",
      "category": "interface",
      "date": "Aug 2015"
    }
    ,
  

    "getting-started": {
      "title": "Getting started",
      "content"	 : "Installing Igor Pro  Igor Pro is a cross platform program that runs on both Windows and Mac OS X.  You need to purchase an Igor Pro license from Wavemetrics, download Igor Pro and install it.  To try out Igor Pro, download and install a fully functional but time limited demo version.Important. Map Manager will only work with Igor Pro 6. Please make sure you have Igor Pro 6 or download a trial version of Igor Pro 6.3.Installing Map Manager  Once Igor Pro is installed, there is no formal installation of Map Manager.  Until its final release, you need to get the source code from Robert Cudmore.  The source code will be in a folder named &#39;MapManager_&amp;lt;date&amp;gt;&#39; where &amp;lt;date&amp;gt; is the date the software was created. The folder will be something like &#39;MapManager_20171021&#39;.  The source code folder can be placed anywhere on your hard-drive.Opening/Running Map Manager  Open Map Manager by double-clicking &#39;MapManager_&amp;lt;date&amp;gt;.ipf&#39; from within the source code folder. You can make a desktop shortcut to &#39;MapManager_&amp;lt;date&amp;gt;.ipf&#39; to make running Map Manager easier.  Once in Igor Pro, click in the command window to compile Map Manager and activate the main menus. The command window is in the lower left of your screen and has the window title ‘Untitled’.Creating annotations  To score a single timepoint stack, open the Stack Browser with the main menu ‘MapManager - Stack Browser’. See Annotating a stack for more information.  To score a timeseries (a map), open the time series panel with the main menu ‘MapManager - Time Series’. See Making A Map for more information.Closing/Quiting Map Manager  Quit Igor Pro by selecting the main menu ‘Igor Pro - Quit Igor Pro’.  When you quit Igor Pro, you will always be prompted with the following dialog.  Always answer No. All Map Manager analysis is saved using the ‘Save’ buttons from within the Map Manager interface.Map Manager Options  Global options are set in the Options Panel.  There is one set of options that will be reloaded the next time Map Manager is run.  Save the current options with the ‘Save’ button in the Options panel.",
      "url": "/getting-started",
      "author": "",
      "category": "workflow",
      "date": "Jul 2015"
    }
    ,
  

    "faq": {
      "title": "FAQ",
      "content"	 : "(1) LimitationsImporting      Map Manager is designed to import single color channel 3D .tif files. To import 2-3 color channel .tif files, the files need to be split into 2-3 separate .tif files. See our Fiji plugins to do this for you.        Does not handle .tif stacks with multiple repeats per images plane. Map Manager will import these stacks fine but does not know about the repeats. You want to strip out repeats before importing into Map Manager.  File name rules  Map Manager will have problems if any of the following strings are in your source file names:  _ch1  _ch2  _zsVisualization  Will only display one channel at a time. For most purposes this is fine. You can quickly switch between the color channels and run intensity analysis on both channels independently. To visualize a merged or composite image, use FIJI.(2) Moving Map Manager files to another locationMoving a single-time point analysisMove the original .tif stack along with its associated _db2.txt, _int1.txt, _int2.txt, and _l.txt files contained in the enclosed ‘stackdb’ folder.Moving a map analysisMove the main map file .ibw and its folder to a new location or computer.",
      "url": "/faq",
      "author": "",
      "category": "post",
      "date": "Jul 2015"
    }
    ,
  

    "reports": {
      "title": "Reports",
      "content"	 : "All reports will open a table of text that can be copy/pasted into another program for further analysis.There are three types of reports: stack reports, segment reports, and map reports.Stack ReportsReports can be generated directly from each stack window.Tip. Use keyboard &#39;[&#39; in any stack window to open and close the left stack db panel.Line Segments  Keyboard ‘e’ In the ‘Line Segments’ section of the main stack db panel to display a summary of each segment.  Keyboard ‘E’ In the ‘Line Segments’ section of the main stack db panel to display the entire line (all 3D points)Points (stack db)  Keyboard ‘e’ In the ‘Points’ section of the main stack db panel to display the stack db as a table.  Keyboard ‘i’ In the ‘Points’ section of the main stack db panel to display intensity analysis as a table.Segment ReportsSegment ReportA segment report display statistics for each segment in a stack. It displays the length of the segment, the number and density of spines, the x/y/z position of the segment, and the number of each user spine type (e.g. mushroom, stubby, etc.). A segment report can be generated for individual stacks or a map.To generate a segment report for each segment in a stack  In a stack window, keyboard ‘o’ for output report.  In the Stack Browser, select a stack in the list, keyboard ‘o’ for output report.  In the Stack Browser, right click a stack in the list of stacks and select ‘Segment Report’.  In the Stack Browser, right click a folder in the list folders (on the left) and select ‘Segment Report (All Stack)’.The columns in a segment report are as follows            Name      Meaning                  numSpines      Total number of spines = goodSpines + badSpines              goodSpines      Number of good spines.              badSpines      Number of bad spines.              totalLen      (2D) Total segment length (um)              goodLen      (2D) Segment length (um) from most distal good spines.              totalDen      (2D) Total density of all spines = numSpines / totalLen              goodDen      (2D) Density of good spines = goodSpines / goodLen              totalLen3d      (3D)              goodLen3d      (3D)              totalDen3d      (3D)              goodDen3d      (3D)              zMin                     zMax                     zMean                     zMedian                     zAngle                     xyAngle                     tort                     xMin                     xMax                     xMean                     xMedian                     yMin                     yMax                     yMean                     yMedian                     nUnknown      Number of spines with userType ‘Unknown’              nMushroom      Number of spines with userType ‘Mushroom’              nFilapodia      Number of spines with userType ‘Filapodia’              nLong      Number of spines with userType ‘Long’              nStubby      Number of spines with userType ‘Stubby’      Map ReportsThere are two types of map reports, Dynamics and Survival. Each report begins with a header that gives information about each session in the report            Name      Meaning                  Idx      Session Index              Map      Name of the map              sessCond      Session Condition              mapSegment      Map specific segment index (different from stackSegment)              Stack      Name of the stack (used internally)              originalFile      Original file name of the stack              stackSegment      Stack specific segment index (different from mapSegment)              date      The date the stack was acquired              time      The time the stack was acquired              seconds      The seconds the stack was acquired (from 12:00 AM on Jan 1, 1904)      Dynamics ReportA dynamics report is used for a map. For each session in a map, it will calculate the length of each segment (um), the number of added and subtracted spines, the density of added and subtracted spines, etc. etc.In any map plot, right-click and select ‘Dynamics Report’. If the map plot is displaying ‘All Segment’, a table for each segment will be opened. Otherwise, one table for the current ‘Map Segment ID’ will be opened.The report is broken into different sections.Information about the segment tracing            Name      Meaning                  totalLen2d      Total 2D length of tracing (um)              goodLen2d      2D length of tracing between most distal ‘good’ objects (um)              smoothPoints      Boxcar smoothing for tracing z (0 means no smoothing)              totalLen3d      The smoothed total 3D length of tracing (um)              goodLen3d      The smoothed 3D length of tracing between most distal ‘good’ object (um)      Information about all object (ignoring user type)            Name      Meaning                  density      density = nTotal / goodLen3d              nTotal      Total number of spines (is same as nGood + nBad)              nGood      Total number of good spines              nBad      Total number of bad spines                                    nAdd      Number of added spines.              nSub      Number of subtracted spines (at the current session)              nSub2      Number of subtracted spines (from the previous session)                                    pAdd      Percent added = nAdd / nGood from previous session * 100              pSub      Percent subtracted = nSub / nGood from previous session * 100              pSub2                                           dAdd      Density added = nAdd / goodLen3d from previous session              dSub      Density subtracted = nSub / goodLen3d from previous session              dSub2             Information about user type 0            Name      Meaning                  density_ut0      Density of user type 0 = nTotal_ut0 / googLen3d              nTotal_ut0      Total number of user type 0              nGood_ut0      Total number of good user type 0              nBad_ut0      Total number of bad user type 0                                    nAdd_ut0      Number of added user type 0              nSub_ut0      Number of subtracted user type 0              nSub2_ut0                                           pAdd_ut0      Percent of added user type 0 = nAdd_ut0 / nGood_ut0 from previous session *100              pSub_ut0      Percent of subtracted user type 0 = nSub_ut2 / nGood_ut0 from previous session              pSub2_ut0                                           dAdd_ut0      Density of added user type 0 = nAdd_ut0 / goodLen3d from previous session              dSub_ut0      Density of subtracted user type 0 = nSub_ut0 / goodLen3d from previous session              dSub2_ut0             Information about user type 1, 2, 3, … 5Other sections will be appended to the report to give information about ‘user type 1’, ‘user type 2’, ‘user type 3’, …, ‘user type 5’Survival ReportA survival report calculates the number of objects remaining from an initial ‘seed’ session. Like a Dynamics report, it breaks down objects into different sections including all objects, followed by user type 0, followed by user type 1, etc. etc.Information about all object (ignoring user type)            Name      Meaning                  surv_all_s0      For each session, the number of surviving objects relative to seed session 0              psurv_all_s0      For each session, the fraction of surviving objects relative to seed session 0                     Note: This can continue with different seed sessions, for example, surv_all_s2 would give the number of surviving objects relative to seed session 2      Information about user type 0            Name      Meaning                  surv_type0_s0      For each session, the number of surviving user type 0 objects relative to seed session 0              psurv_type0_s0      For each session, the fraction of surviving user type 0 objects relative to seed session 0                     Note: This can continue with different seed sessions, for example, surv_type0_s2 would give the number of surviving user type 0 objects relative to seed session 2      Information about user type 1            Name      Meaning                  surv_type1_s0      For each session, the number of surviving user type 1 objects relative to seed session 0              psurv_type1_s0      For each session, the fraction of surviving user type 1 objects relative to seed session 0      Information about user type 2, 3, 4, 5Other sections will be appended to the report to give information about ‘user type 2’, ‘user type 3’, ‘user type 4’ and ‘user type 5’",
      "url": "/reports",
      "author": "",
      "category": "analysis",
      "date": "Jul 2015"
    }
    ,
  

    "intensity": {
      "title": "Intensity",
      "content"	 : "Algorithm and StrategyAll intensity analysis is performed by calculating statistics (Sum, Mean, standard-deviation, N) from the intensity values of pixels within a number of 3D regions-of-interest (ROI). Further analysis is then derived by performing algebra between these ROIs.Spine ROIA polygon surrounding a spine. Starts as a rectangle and then overlapping regions of the backbone/dendrite ROI is subtracted. Any remaining disjoint regions (on other side of backbone/dendrite) are then removed. The spine ROI is centered in the same image plane as the spine head. Three parameters specify spine ROI: width, extend head, and extend tail.Backbone/Dendrite ROIA polygon centered on the spine connection point and extending a fixed distance (um) up and down the backbone/dendrite line. The backbone/dendrite ROI is centered in the same image plane as the spine connection point. The distance to extend up and down the backbone/dendrite line is set with ‘+/- Segment (um)’Background ROIBoth the spine roi and the backbone/dendrite roi get their own background ROIs. The spine background ROI is the same size/shape as the spine ROI. Likewise, the backbone/dendrite background ROI is the same size/shape as the backbone/dendrite ROI. The position of these background ROIs is the position that gives the minimal intensity from a number of candidate positions (a 3x3 grid emanating from the spine head). All background ROIs (both spine and backbone/dendrite) are centered in the same image plane as the spine head.Please note, parameters controlling the grid of candidate background positions is not exposed to the user.Running Intensity AnalysisFor a stack, intensity analysis is run from a stack window using the ‘Analyze Intensity’ button. This button is in the left panel, open the left panel for a stack with keyboard ‘[’.For a map, intensity analysis is run from the main map manager panel using the ‘Intensity’ tab.ParametersGlobal intensity analysis parameters are set in the stack db options panel. These parameters are used for every spine in a map.Once intensity analysis has been run, the parameters of individual spines can be set using the ‘Object Info’ panel in a stack. Open the Object Info window in a stack with keyboard ‘i’.  Width (um). Width of spine ROI centered on the spine line.  Extend head (um). Distance to extend the spine ROI beyond its spine head.  Extend tail (um). Distance to extend the spine ROI beyond it connection point with the backbone/dendrite..  +/- Slices. The statistics (Sum, Mean, SD, N) of each spine, backbone, and background ROI is calculated after expanding the ROI up and down in Z-dimension.      +/- Segment (um). The distance (um) to extend the backbone/dendrite ROI up and down the backbone/dendrite line.    Background - Both Sides. Only available as a global options.  Background Rows. Only available as a global options.  Background Row Mult. Only available as a global options.  Background Columns. Only available as a global options.      Background Column Mult. Only available as a global options.    Scale Radius (um). Only available for individual spines using the Object Info Panel. When intensity analysis is run (for a map), each spine is assigned a radius (um) following the radius of the segment it is attached to. Once intensity analysis has been run, this radius can be set for individual spines in the Object Info panel.Intensity Analysis OutputThe following statistics are calculated and displayed in the X/Y statistics lists in the Plot Panel.A table of these statistics can be displayed for each stack in the stack db panel. To do this: (1) in a stack window, open the stack db panel with keyboard ‘[’, (2) click on the point list and (3) use keyboard ‘i’ for intensity.Please note, ‘u’ is for user. User stats are simple algebra on the core intensity analysis.Spine ROIsSum:spine sumsMean:spine meansSD:spine standard deviationsN:# pixels in spine roiSpine Background ROIsbSum:spine background sumsbMean:spine background meansbSD:spine background standard deviationsbN:# pixels in spine background roiBackbone/Dendrite ROIdSum:dendrite sumdMean:dendrite meandSD:dendrite standard deviationdN:# pixels in dendrite roiBackbone/Dendrite Background ROIdbSum:dendrite background sumdbMean:dendrite background meandbSD:dendrite background standard deviationdbN:# pixels in dendrite background roiBackground subtracted ROIsubssSum:background subtracted spine sumubssMean:background subtracted spine meanubsdSum:background subtracted dendrite sumubsdMean:background subtracted dendrite meanCross channel statsutssmoss:this spine sum minus other spine sum.                This can be read as &#39;(t)his (s)pine (s)um (m)inus (o)ther (s)pine sum&#39;utsmmosm:this spine mean minus other spine meanutssdoss:this spine sum divided by other spine sumutsmdosm:this spine mean divided by other spine meanutssmods:this spine sum minus other dendrite sumutsmmodm:this spine mean minus other dendrite meanutssdods:this spine sum divided by other dendrite sumutsmdodm:this spine mean divided by other dendrite meanMoving the background ROIClicking on the spine backgrond ROI will enable an edit mode where the user can specify the background position. This edit mode also shows the candidate background positions.  Mouse-Click to set a new position.  ‘Enter’ to accept new position.  ‘r’ to reset spine position. A new position will automatically be chosen next time spine is analyzed.  ‘esc’ to cancel moveErrors and WarningsWhen the intensity analysis has a problem analyzing a spine, errors and warnings will be set for that spine. Most errors are due to an ROI going off the image or in problems with drawing a valid backbone ROI (near the end of a segment).There are two ways to browse errors and warning:  Use the ‘Errors &amp;amp; Warnings’ button in the search panel.  Examine the ‘Errors’ column in a stacks point list panelBe careful of spines that are very close to each other. As spine density increases, the spine ROI of a spine will start to overlap with the spine ROI of its neighbors.There are two ways to check for nearby (high density spines). These are slightly different measurements, the first is examining closeness of the spine head as a 3D point, the second is examining closeness by looking at the connection point along a segment.  Use the ‘Closeness’ button in the search panel too find spine heads that are close to other spine heads.  Use the ‘nnDist’ column in the point list panel to find spines that are connected to a segment close to other spines connection points.Errors and Warnings areError # 3 x spine ROI beyond imageError # 3.5 y spine ROI beyond imageError # 6 reducing spine with ImageSeedFillError # 9 extending backbone errorWarning # 5.1 prev cPntIntensity DirtyA spines intensity analysis becomes ‘dirty’ and needs to be re-run whenever the geometry of a spine changes or the geometry of its connected spines change.Intensity analysis can be run on just ‘dirty’ spines using the ‘Only Dirty’ checkbox in the Intensity Tab of the main map manager panel. Dirty spines can be browsed using ‘Int Dirty’ in the main search panel.A spines intensity analysis becomes dirty when:  A spine is moved  A spine is reconnected to the backbone  Its analysis parameters are changed (width, extend head, etc.)  Any of the other spines connected to it are changed  Its dynamics are changed (addition, subtraction, persistent)",
      "url": "/intensity",
      "author": "",
      "category": "analysis",
      "date": "Jul 2015"
    }
    ,
  

    "hdd-paths": {
      "title": "Hard Drive Paths",
      "content"	 : "Open the Hard Drives Path Panel using the main menu ‘MapManager - Hard Drive Paths’.Save Options ButtonSave the options. Saved options will be loaded next time Map Manager is run. This is the same as the ‘Save Options’ button in the main options panel.Map Manager MapsLocation to load and save maps. This defaults to ‘My Documents’ on Windows and ‘Documents’ on OS X.Fiji ApplicationLocation of Fiji application. Used when creating line segments.  On Windows, something like C:UserscudmoreappsFiji.appImageJ-win64.exe  On Mac, something like /Users/cudmore/Fiji.app/Contents/MacOS/ImageJ-macosxSession DBAdvanced:Location of your session DB folder if using the mp285 CanvasMap Manager CodeShows the hard-drive path that Map Manager was loaded from. Useful if there are multiple Map Manager installations on one computer.",
      "url": "/hdd-paths",
      "author": "",
      "category": "interface",
      "date": "Jul 2015"
    }
    ,
  

    "file-format": {
      "title": "File format",
      "content"	 : "Reading Map Manager files in other programming environmentsMap Manager saves all stack and time-series map files as plain text files. In this way, annotations created in Map Manager can easily be opened in a wide range of other programming environments for additional visualization and analysis.Map Manager - Matlabadd descriptionPyMapManagerWe provide a Python package, PyMapManager, to do this. Please have a look at this package as a starting point for custom analysis and visualization using existing Map Manager files.  PyMapManager on GitHub  PyMapManager API documentation  IPython notebook examplesIf you are on a Mac, python comes pre-installed and you are good to go. In general, Anaconda is a useful starting point as it pre-installes most Python packages you might need. Download Anaconda here.Map Manager file formatFor the intrepid data scientist (e.g. data analyst) we are providing the details of the Map Manager file format for both single time-points and maps.Single time-point files  The original .tif file is never modified  Annotations are saved in a stackdb folder          _db2.txt : Table of annotation values, one line per annotation      _Int1.txt : Table of intensity analysis for channel 1, one line per annotation      _Int2.txt :      _Int3.txt :      _l.txt : Table of line segment fits      Map files  Maps are saved in a folder whose name is the same as the map name  At the root of this folder are three map files          mapname.txt : See format below      _objMap.txt :      _segMap.txt : Segment map (if there are segment)        There are some folders          line : Contains tabular data of line tracing, one file per timepoint      raw: The original .tif files are never modified, these are direct copies.      stackdb : Same format as for ‘Single time-point files’      HDF5We are working on saving Map Manager files in the HDF5 format. HDF5 is an open source cross platform binary file format. It can be read from Matlab, Python, Igor Pro and from a command line.Out of the box, Map Manager is not saving files in the HDF5 format. If you are interested in turning on this feature, please email Robert Cudmore.Each mapname.txt file has the following formatMap file format            index      0      1      2      3      4      5      6      7      8                  hsType      mm3      mm3      mm3      mm3      mm3      mm3      mm3      mm3      mm3              hsStack      rr30a_s0      rr30a_s1      rr30a_s2      rr30a_s3      rr30a_s4      rr30a_s5      rr30a_s6      rr30a_s7      rr30a_s8              hsdb      rr30a_s0_db2      rr30a_s1_db2      rr30a_s2_db2      rr30a_s3_db2      rr30a_s4_db2      rr30a_s5_db2      rr30a_s6_db2      rr30a_s7_db2      rr30a_s8_db2              hsStackNV      rr30a_s0      rr30a_s1      rr30a_s2      rr30a_s3      rr30a_s4      rr30a_s5      rr30a_s6      rr30a_s7      rr30a_s8              date      20141009      20141013      20141016      20141017      20141018      20141020      20141021      20141022      20141029              time      20:01:40      22:24:04      19:49:05      20:30:39      16:18:59      19:25:41      18:36:19      19:47:00      19:05:27              hsStackSeconds      3495729700      3496083844      3496333745      3496422639      3496493939      3496677941      3496761379      3496852020      3497454327              fiducPnt      0      0      0      0      0      0      0      0      0              numChannels      2      2      2      2      2      2      2      2      2              defaultChannel      2      2      2      2      2      2      2      2      2              px      1024      1024      1024      1024      1024      1024      1024      1024      1024              py      1024      1024      1024      1024      1024      1024      1024      1024      1024              pz      70      65      70      70      70      80      70      80      70              dx      0.12      0.12      0.12      0.12      0.12      0.12      0.12      0.12      0.12              dy      0.12      0.12      0.12      0.12      0.12      0.12      0.12      0.12      0.12              dz      1      1      1      1      1      1      1      1      1              stackdbVersion      20151224                                                                      numSeg      5                                                                      numObj      2467                                                                      numSpine      1227                                                                      importedStackName      RR30a_S0      RR30a_S1      RR30a_S2      RR30a_S3      RR30a_S4      RR30a_S5      RR30a_S6      RR30a_S7      RR30a_S8              condStr      a1      a2      e      b1      b2      b      c1      c2      c3              zeroSession      0                                                                      sessions      0      1      2      3      4      5      6      7      8              datetime      3495729700      3496083844      3496333745      3496422639      3496493939      3496677941      3496761379      3496852020      3497454327              days      0      4.0989      6.9913      8.0201      8.8454      10.975      11.941      12.99      19.961              hours      0      98.373      167.79      192.48      212.29      263.4      286.58      311.76      479.06              zsessions      0      1      2      3      4      5      6      7      8              zdays      0      4.0989      6.9913      8.0201      8.8454      10.975      11.941      12.99      19.961              zhours      0      98.373      167.79      192.48      212.29      263.4      286.58      311.76      479.06              mapCond      mc1                                                              ",
      "url": "/file-format",
      "author": "",
      "category": "post",
      "date": "May 2015"
    }
    ,
  

    "time-series-panel": {
      "title": "Time Series",
      "content"	 : "The Map Manager time-series panel provides an interface to load, save and browse Map Manager time-series (maps). Open the time-series panel using the menu ‘MapManager - Time Series’Loaded maps are listed on the left and when a map is selected, its time-points (stacks) are listed on the right.  Open Map. Open/Load a map from the hard-drive.  Save Map. Save selected map to hard-drive. By default, only the portions of the map that need saving are saved. Ctrl+click will save the entire map.Opening Maps. When opening a map, select the maps &#39;.ipf&#39; file. If a map is named &#39;mymap&#39;, load &#39;mymap.ipf&#39;.Plot  Object Map. Open a map plot. For spines, this will plot the position of each spine along its dendritic segment versus time-points (Sessions). For other annotations, this will plot annotations in their creation order. In both cases, these plots are crucial tools to visualize annotation dynamics.  Segment Map. Open a map plot showing the segments within each session and the connectivity of segments across sessions. This is only for spine annotations that have segment tracings.  X Axis. Choose different X-Axis for Object and Segment map plots. Available X-Axis are:          Sessions      Datetime      Days      Hours      Zero Sessions      Zero Days      Zero Hours        X-Axis Condition.Datetime, Days and Hours require stacks to have a date/time specified. A stacks date/time can be manually edited by turning on ‘Edit Date/Time’ in the Utility Tab. The X-Axis options ‘Zero Sessions’, ‘Zero Days’, ‘Zeros Hours’ use a session in the map as a zero timepoint. Specify this by right-clicking on a stack and selecting ‘Zero Session’. The zero session for a map will have a ‘*’ in its session list. Zero session is also used when plotting from time-series panel tabs including: Dynamics, Trajectory, and Intensity.Panels  Search. Open the search panel.  Plot. Open the plot panel.  Pool. Open the map pool panel.  Map DB. Open a map database panel to quickly browse and load maps from hard-drive. No documentation yet.Miscellaneous  Unload Stacks. Unload all stacks in the selected map. Ctrl+click to unload all stacks in all open maps. Unloading a stack will unload the RAW IMAGE DATA. It DOES NOT unload the stack annotations or the map.  Close Windows. Close all windows associated with the selected map.Right-click for context menusRight-click on a map name.  Find Points. Open find points panel.  Density Report. Generate a density report for the map. See reports.  Dynamics Report. Generate a dynamics report for the map. See reports.  Survival Report. Generate a survival report for the map. See reports.  Export Map. DO NOT USE Exports a map to text files. Files are saved in the ‘export/’ folder.  Show on HDD. Shows the hard-drive folder where the map is saved.  Close map. Close a map, removing all associated images and analysis from Igor memory.  Close Windows. Close all open windows associated with a map.Right-click on a stack name.  Display Stack. Display the stack in a stack window.  Plot Run +-1. Plot a run of stacks from the selected stack.  Plot Run +- All.  Plot Run +- n.  Zero Session. Set the selected stack to the zero session. Zero sessions are used when plotting a map with X-Axis set to ‘Zero Session’, ‘Zero Days’, and ‘Zero Hours’. The zero session will have an Asterix (*) before its session index in the list of sessions.  Find Points. Open find points panel.  Edit Table. Edit annotations in a stack as a text table. This is useful to copy and paste annotations for further analysis.  Unload Stack. Unload the raw image data for a stack. Unloading a stack does not unload the stack annotations.Right-click on the headers in the stack list.  Columns can be toggled on and off.  Edit Condition. Turns on editing of map and session conditions.TabsMap MakingInterface to create maps and manage time-points. See making a map.DynamicsInterface to plot the dynamics of annotations. See reports to create tabular reports of annotation dynamics.TrajectoryInterface to analyze and plot the trajectories of annotations.IntensityInterface to plot intensity analysis of spine annotations. See intensity.Right-click on plot buttons to plot ‘lifetime’ and ‘death’.ReportSee reports.UtilityInterface for advanced and internal debugging. In general there is no need to use this.",
      "url": "/time-series-panel",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "stackdb-options-panel": {
      "title": "Options",
      "content"	 : "The Map Manager Options panel provides global options to control the behavior of Map Manager. Options can be saved using the Save Options button. Values shown in red will effect analysis and those in black effect program behavior..The options panel is opened from the main menu ‘MapManager - Options’.General  Stack Browser On Open. Open the stack browser when Map Manager is opened.  Time Series On Open. Open the time-series panel when Map Manager is opened.  Hide Code. Hide code windows when Map Manager is opened.Stack DisplayOptions that control the display of stack windows. Changes will be applied the next time a stack window is opened. Already opened stack windows can be updated on-the-fly by pressing keyboard ‘r’ (in the stack window).      Points. Toggle stack db objects.        Spine Line. Toggle the line connecting the spine head to the segment radius.        Point mask. Turn point masking on/off. If off, annotations will be shown in all image planes. If on, annotations will only be shown near the image plane corresponding to each annotations Z position. See Mask Points.        Segment Color For All Points. Display all points using the segment color specified in the stack window.        User Type.        Line and Radii. Toggle the segment tracing and radius lines        Line Mask. Similar to Point mask, toggle masking the line to only display around the image plane it is in.        Channel Order.        Tag Font Size. In a stack window, the tags are the stack db point number. In a map, the tags are the run number of the point.        Scale Bar. Displayed in the bottom right of all stack windows. Cycle through stack window candy options with keyboard shift+c.        Left/Right Arrows Will Scroll Through Line (Otherwise Pan).        Mask Points. If Point Mask is on, this controls the number of image planes an annotation is visible above and below its Z position..        Flash Ticks. A number that controls the speed that a point is flashed when selected. Smaller numbers are faster. Point flashing is used to make it easier to see where there is a point selection. See ‘flashSel’ to control the size and shape of the point that is flashed.        Window With 1/2. Default stack window size. Each stack window has two sizes that can be cycled using keyboard ‘]’.        Default Zoom. Default zoom (in um) to zoom points in a stack and run plot. This is used when an annotation is right-clicked and ‘plot point’ or ‘plot run’ is selected.    Default Stack Candy. Default window candy for each stack. There are 5 options.          All.      None.      Scale.      Scale + Label.      Scale + Label + Axis.            Kill Stack (from memory) on window close.        Click and Drag.    Keyboard edits ‘User Type’.Stack DB  Warn On New Objects.  Warn On Delete Objects.  New Objects On Mouse Click (no shift).  Allow New Objects When Viewing Sliding Z-Projection.  Search line points when connecting spine/bouton.  New Object (Shift+Click). The default object to make on shift+click.  Default plot object.Object Map      Connect points within this distance (um). When auto connecting points in a map and generating a Guess in Find points.        Connect spines within this distance (um). When auto connecting spines in a map and generating a Guess in Find points. This is the distance from the segment pivot points along a dendritic segment (um). You can see this distance (pDist) in the Point Info panel of a stack.    Run Window Width (pixels). The size of each window in a spine run.  Show timepoint in stack window.  Always show stack DB indices (tags). xxx  Fixed posiiton for each run window. xxx  Lock segment selection in run plot. xxx  Shift + left/right to go to prev/next timepoint. xxx  Auto plot object map on load. xxx  Check map before save. xxx  Allow Jumping Objects.Intensity AnalysisSee the intensity analysis page for a thouough decription.  Intensity Analysis. Turn intensity analysis on/off. When on, spine selections will show intensity ROIs in the stack window.  Debug.  Debug On Error.  Width (um).  +/- Slices.  Extend Head (um).  Extend Tail (um).  +/- Segment (um).  Background Candidates          Both Sides.      Rows and Row Mult.      Columns and Column Mult.      Importing Segments From FIJI      Default Segment Radius (um).        Box Filter Line (points).        Box Filter Radius (points).        Convert To 8-bit. Will convert to 8-bit (in Fiji). This makes line fit much faster.        Close Fiji When Done. Always leave this on. This has been depreciated and will be remove.  MiscellaneousA table to set how annotations are displayed. Right-click on ‘marker’ or ‘color’ to set. Double-click on ‘size’ to set. Note, ‘size’ is in arbitrary Igor Pro centric units.            Idx      Name      Meaning                  0      spineROI      Spine marker in stack and map plot              1      boutonROI                     2      controlPnt                     3      pivotPnt                     4      lineROI                     5      otherROI                     6      pntSel      Point selection marker              7      runSel      Run selection marker              8      maskSel      Mask selection marker              9      flashSel      Marker used to flash point selections (makes them easier to visually locate)              10      globalPivot                     11      lineSel                     12      line      Segment tracing line              13      radius      Segment tracing radius              14      sROI      Spine intensity ROI              15      dROI      Dendrite/segment intensity ROI              16      sbROI      Spine background ROI              17      dbROI      Dendrite/segment background ROI              18      Bad      Bad annotations              19      Add      Added              20      Subtract      Subtracted              21      Persistent      Persistent              22      Transient      Transient              28      User Type 0..9      Markers for user type 0..9      Load Stacks From Special FolderEach of the check boxes will redirect the loading of image stacks to different folders. In particular, the channels8 option will load 8-bit versions which is useful to speed annotations of larger 16-bit images. See Fiji plugin bConvertTo8Bit_v5_.py to convert entire directories of tiff stacks to 8-bit.Stack Browser OptionsAdditional option are available in the Stack Browser Options panel.Open the Stack Browser Options panel using the ‘Options’ button in the stack browser.",
      "url": "/stackdb-options-panel",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "stack-plot": {
      "title": "Stack plot",
      "content"	 : "A stack plot shows a value/statistic for all 3D annotations in a single stack. Each point is a value/statistic for one 3D annotation in the stack.All stack plots are interactive. Selecting an annotation will propagate this selection to other stack and map plots.Make stack plots from the main plot panel.Example stack plot of position of spines along a dendritic segment. Spines can be on different sides of the dendrite and are shown here on the left or right of the dendritic segment.Example stack plot of spine length in μm (sLen2d) versus spine index. Spine index is the order spines were created in 1, 2, 3, etc. etc.",
      "url": "/stack-plot",
      "author": "",
      "category": "plot",
      "date": "Apr 2015"
    }
    ,
  

    "stack-annotations": {
      "title": "Stack Annotations",
      "content"	 : "3D Annotations are the core of Map Manager. They are easy to create, edit, and in a map to connect them between time-points. Annotations can be searched, plotted, and exported.Creating and Editing 3D annotationsCreating an annotationShift+click in the image to create a new annotation. Remember, all annotations are 3D. Take care in choosing the imaging plane where you create an object. For spines, the point should mark the membrane limit near the tip of the spine.Selecting an annotationSingle-click on an annotation to select it. The selected annotation is shown as a yellow circle. Only one annotation can be selected at a time. Keyboard esc will cancel the annotation selection.Moving an annotationSelect the annotation (single click), right-click and select ‘Move’. Your next click will be the new 3D position of the annotation. You are given feedback in the bottom of the stack window. Press keyboard esc to cancel a move.Deleting an annotationSelect the annotation (single click), right-click and select ‘Delete’. Alternatively, select the annotation (single-click) and hit the del key.Tip. All annotations are 3D points. When an annotation is created, the x/y position is specified by the position of the mouse cursor and the z position is the currently viewed image plane. To create a new point with better precision, zoom in the stack window with ctrl + mouse-wheel or keyboard &#39;+&#39;. As always, zooming will follow the mouse pointer.Tagging annotations with ‘bad’ and ‘user type’Each annotation can be marked with different tags. To see most of the tagging options, right-click a selected annotation and look at the contextual popup menu.      Tagging an annotation ‘bad’    All annotations tagged with ‘bad’ will not be included in the analysis performed in reports and their visibility can be toggled in all plots. In general, stacks should be over annotated and ‘bad’ should be used to remove an annotation from the analysis but not from the database of annotations. In this way, as data sets grow (and time passes) when you return to something that looks promising (but is not), it will already have a ‘bad’ annotation.        Tagging and annotation with a ‘user type’    Each annotation can be tagged with one user type, from user type 1 through user type 10. This is useful for organizing annotations into different groups. Annotation user type can  be searched, used to plot subsets of annotations, and used to create a mask of annotations to overlay over a plot. For example, long spines cold be taged with ‘user type 1’ and then reports can be generated that break down the dynamics of all versus ‘user type 1’ spines.  Exporting annotationsIt is very easy to export the 3D coordinates of annotations.      Open the left control bar with keyboard [, click on the list of annotations and then press keyboard e. This will open a text table of all annotations in the stack, you can copy and paste it into your favorite analysis program. See stack report for more information.        When you save a stack or a map, all the annotations in each stack is saved in a single text file. The file can be found in a folder named ‘stackdb’ in the hard-drive folder of your original stack. See File formats for more information.        We provide, Map Manager - Matlab, an easy to use Matlab class library that allows all Map Manager analysis to be extended using Matlab.  Creating and editing line segmentsLine segments are fit using a custom Fiji plugin from within Map Manager, there is no need to manually interact with Fiji. The path to Fiji does need to be set in the hard drive paths panel.All the line segments in a stack are listed in the ‘Line Segment’ group. Each line segment has a length (um), a number of objects (nObj), a radius (r), and a color (c).Creating line segments  Make sure ‘Segments’ edit checkbox is turned on. This is in the left control bar which can be opened with keyboard [.  Create a new (empty) line segment  Click the + button in the ‘Segment’ group.  Make a series of 3D control point annotations along a dendritic segment.          Shift-click in the image to create a control point.      Continue making control points along the dendritic segment.        Fit the line segment in FIJI          Right-click on the new line segment (in the top left list of segment) and select ‘Make From Control Points - FIJI’. This will open the ‘Bob Neurite Tracer’ plugin in FIJI, fit a line to your control points and open the fitted line segment in the map manager stack window.      Important: When making control points, they need to be in order along a segment. If you double-back a control point on the segment, the line fit with dumbly follow this ordering of control points. If it all gets confusing you can just delete all your control points and start over.Important: When making a map, you will be connecting (e.g. making persistent) individual line segments  from one timepoint to the next. For segments that you will connect together in a map, make sure your control points are in the same direction along each segment. If your control points go left to right in time-point 1, they should also go left to right in time-point 2.Line segment radiusEach line segment has a fixed radius in um. Spines are connected to this radius. To change the radius, double-click the radius for a segment and enter a new number. The radius of each segment is displayed in the ‘r’ column. Setting the radius will reconnect all your spines to that new radius while preserving the spine connection point to the line. To set all the radii of a run of connected segments, right click on the segment in the list and select ‘Set run to same radius’.Line segment pivot pointsWhen in a map, line segments need a ‘pivot point’. Specify a pivot point for a segment by clicking a point in the segment, right-click and select the ‘Set As Segment Pivot’ menu.The pivot point should mark a region of the segment that is visually similar and identifiable in all time-points. A good strategy is to choose a region of the segment near a large spine that is present in all time-points. Another strategy is to choose a pivot point where some other segment (dendrite) crosses near your segment as these tend to remain stable across time. Try and put the pivot point near the center of the segment, do not place it at either end. The pivot point is used to calculate a line distance along the segment (in um) which in turn will be used to auto-guess connections between objects (spines) across time-points.",
      "url": "/stack-annotations",
      "author": "",
      "category": "imagingcore",
      "date": "Apr 2015"
    }
    ,
  

    "search-panel": {
      "title": "Search",
      "content"	 : "The search panel allows a stack or map to be searched for stack db objects.Interacting with resultsPerforming a search will create a list of object matching the search criteria. Selecting an entry in the search results will select that object in any open stack and map plots. Likewise, selecting an object in a stack or map plot will select the object in the search list (if it is in the list).  Single-click or scroll with keyboard will select the object in existing stack windows (it will not open or pan/zoom the existing stack windows).  Double-click to open and select the object in its corresponding stack.  Option-click to zoom the object in an already open stack plot.  Right-click to open a run plot.Types of searchesFirst select the type of object with ‘Object Type’ popup. Start by selecting ‘Spine’.Objects  All. All objects of ‘Object Type’  Bad. Objects marked bad  Errors and Warning. Objects with Intensity Analysis errors and warnings. USe the Error and Warning checkboxes in the upper right of the panel to toggle these columns on and off.  Int Dirty. Returns spines with dirty intensity analysis. Spines with dirty intensity analysis can be analyzed in the main map manager panel, intensity tab.  Int User.  Int Bad.  Notes. Objects with notes matching the search criteria. Use ‘*’ as a wildcard. Use ‘*’ to return all objects with notes, use ‘thistext*’ to search for notes starting with ‘thistext’.  Closeness. Returns object that are within specified distance (um) of each other.  V Spines. Return spines where the z-plane of the spine head is farther (in z) from the connected backbone/dendrite line.  ROI Bounds. Return spines with background ROI within specified distance (um) from edges of image. This is useful if stack alignment has been run causing images to be shifted/rotated resulting in undefined regions on the edge of the image.  Segment Ends. Return objects within specified distance (um) of the end of their segment/backbone line.Map Tab  Addition.  Subtraction.  Persistent.  Transient.  Bad Runs. Return a list of objects that have a mixture of good and bad within their respective run. This is used for debugging and will be removed.  Re Added. Return a list of added spines that have a previous subtraction (on a previous timepoint) that is within specified distance along the backbone/dendrite.Manual TabReturn a list of objects matching a user specified criterion.Do this by selecting a statistic in the list, specify a value, and an operator (&amp;gt;, &amp;gt;=, &amp;lt;, &amp;lt;=, =, Not).For example, to generate a search of all long spines, select sLen2d/IntCh1, enter a spine length (um) like 4, select ‘&amp;gt;’ operator and press the ‘Manual Search’ button.",
      "url": "/search-panel",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "run-plot": {
      "title": "Run plot",
      "content"	 : "A run plot is a sequence of stack windows, one for each session in a timeseries. The purpose of a run plot is to visualize the dynamics between annotations. The image below shows a run plot of spines. Spine # 201 is selected in each of three stack windows corresponding to timepoints.Opening a run plotTo open a run plot of annotations, right-click on an annotation and select ‘Plot Run +- …’. This will work in all map plots and search results.All run plots will have the timepoint of the selected annotation as the center window. The different options (+- 1, +- All, +- n) lets you choose how many timepoints before and after the selected timepoint.There are three types of run plots:  Annotation Run. Connected (persistent) annotations are centered and zoomed across sessions in a timeseries. Open an annotation run plot by right-clicking an annotation in a map plot.  Stack Run. A run plot showing the sequence of stacks in a timeseries. Open a stack run plot by right-clicking a session in the main time series panel.  Segment Run. Connected (persistent) segments are selected across sessions in a timeseries. Open a segment run plot by right-clicking a segment in a segment plot. There is currently only one type of segment plot and it is opened using the ‘Segment Map’ button in the main time series panel. This is only for spine annotations that have segment tracings.Navigating a run plotEach stack window in a run plot behaves just like an individual stack window. For example, shift+click will create a new annotation. In addition, run plot stack windows have some added features.Aligning a run plot to a selected annotationControl+click on an annotation in one stack window of a run plot will select, center, and zoom that annotation in all stack windows of the run plot. If a stack at a given timepoint is missing the annotation (for example, the object was subtracted), the image will center and zoom to the region where the annotation ‘would be’.Linking all the stack windows in a run plotKeyboard-l (that is lower-case ‘l’ as in ‘link’) will visually link all stack windows in a run such that panning, zooming, or setting the slice in one window will propagate to all other stack windows in the run. Linking can be turned on and off again by pressing keyboard-l.Editing annotation dynamics in a run plotThe dynamics between annotations and segments can be edited in a run plot.  Keyboard a : The selected annotation becomes added.  Keyboard s : The selected annotation becomes subtraced  Keyboard p : The selected annotations become persistent. This requires a selection in the previous timepoint.  Keyboard b : The selected annotation is tagged as bad. Bad tags are only available for annotations, not for segments.Persistent is a special case. When two annotations are connected between two sequential timepoints/sessions we refer to them as ‘persistent’. To connect two annotations and make them persistent, both annotations need to be selected (in their respective timepoints) and the annotations in the latter timepoint needs to be marked persistent with keyboard p.Important: The keyboard commands a/s/p will default to editing the dynamics of annotations. To edit the dynamics between segments, turn on ‘Segments’ edit.All of these keyboard commands have corresponding right-click contextual menus. Select an annotation and right-click to open the contextual menu.Reading annotation labels in a run plotThe dynamics of each annotation is encoded in the color of its label, green for addition, red for subtraction, and yellow for persistent. Persistent annotations are connected between timepoints, we call this a run. Annotations that are in the same run will be labelled with the same number in each of the stack windows of a run plot. Added annotation get a new label number. This system is designed to quickly visualize the connectivity between annotations.Example run plot following a spine (yellow circle) through multiple timepoints in a map.Same run plot as above after zooming in. All stacks in a run plot can be synchronized with keyboard ‘l’ (as in Link) so that zooming, panning, and setting the slice in one stack window of the run will propagate to all other stack windows of that run.A segment run plot with the same segment selected in all timepoints. Note the difference in scale compared to the spine run examples. All scale bars are 5 um.",
      "url": "/run-plot",
      "author": "",
      "category": "plot",
      "date": "Apr 2015"
    }
    ,
  

    "plot-panel": {
      "title": "Plot panel",
      "content"	 : "The plot panel provides an interface to make stack and map plots.Plotting a stack  Select a stack in the stack list  Select a Y stat  Select an X stat  Press ‘Spine Plot (stack)’ buttonPlotting a map  Specify the map to plot with ‘Grab Map’ button.  Select a Y stat  Select an X stat  Press ‘Spine Plot (map)’ buttonBoth the Y and X values can be normalized to a session as an absolute change (Abs) or a percent (%). We call this normalization session the ‘zero session’. The zero session for each map can be set in the main map manager panel using ‘Zero Session’. This can be over-ridden in the plot panel by turning on the checkbox and specifying a ‘Norm Session’Saved PlotsOnce a map plot is created, Saved Plots allows the x/y plot statistics to be grabbed and reused quickly. This saves time as the number of statistics in each x/y list is large and the names of each statistic is rather cryptic.Right-click a row in the list of Saved Plots and select a menu:  Grab Plot Window. Grab the x/y statistics from the top-most map plot and save it in the selected row.  Fill In Interface. Take a Saved Plot and fill in the x/y statistics in the stack plot panel.  Delete Plot. Delete a saved plot.Once a plot is saved (with ‘Grab Plot Window’), the x/y statistics can be filled in by double clicking.Double-click on a Saved Plot name to set its name.Saved plots are saved with the global map manager options in the main map manager options panel.",
      "url": "/plot-panel",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "map-plot": {
      "title": "Map plot",
      "content"	 : "A map plot shows annotations versus time-points. Objects persisting from one session to the next are connected with a line.All map plots are highly interactive. Selecting an object will propagate this selection to other map and stack plots. Right-click an object to plot a run.There are two special plots provided in the time-series panel: Object Map and Segment Map.ColorsThe colors of objects in a map denote their dynamics.  Green : Added  Red : Subtracted  Blue : Transient (1 session)  Yellow : Persistent  White : BadTop control barToggle the top control bar on and off with keyboard ‘c’.  Segment ID. Plot individual segments. Use ‘All Segments’ to plot all segment. This is only used for spine annotations.  Bad. Toggle display of annotations tagged as bad.  Int Bad. Toggle display of annotations tagged as intensity bad.  Stats. Display a table of statistics (mean/sd/se/n) for plotted data.  Raw. Display a table of raw data.ExamplesThere are two special plots provided in the time-series panel: Object Map and Segment Map. A large number of plots can be generated using the plot panel.This is an example of a ‘Spine Map’ showing the position of each spine on its dendritic segment. The lines connect persistent spines across time-points. Added spines are green, subtracted are red, and transient are blue. Spines tagged bad are in white. This plot is showing each time-point as a function of the day it was acquired with the first time-point being the zero day.A map plot of spine length in μm (sLen2d) versus map session.A map plot of spine length in μm (sLen2d) for time-point 1 versus time-point 0. Each point is the length of a single spine measured in session 0 (bottom axis) and again in session 1 (left axis).Right-click menuKeyboard                   Key      Result                  Navigation                                   Arrow-keys      Pan                     +/-      Zoom in/out                     mouse-wheel      Zoom in/out                     enter      Full Zoom (reset zoom)              Data                                   esc      Cancel selection (including masks)                     b      Mark selected object as bad (press ‘b’ again to mark it good                     e      Edit plotted data in table              General                                   r      refresh plot                     d      toggle dynamics coloring                     f      toggle forced coloring                     c      toggle top control bar                     i      open/close object info panel                     h      display help      ",
      "url": "/map-plot",
      "author": "",
      "category": "plot",
      "date": "Apr 2015"
    }
    ,
  

    "making-a-map": {
      "title": "Making a map",
      "content"	 : "A map is a time-series of stacks. You create a map by appending stacks from the stack browser. Once a map is made it can be saved, re-opened, annotated, and browsed using the time-series panel.The time-series panel shows a list of open maps on the left. When a map is selected (het3b in this example), a list of sessions in the map are shown on the right (in this example there are 12 sessions).Pre-process your raw dataMap Manager will only import single channel .tif stacks. If your stacks have two or more color channels, they need to be de-interleaved into separate .tif files, one .tif file per color channel. We have Fiji plugins to do exactly this for Zeiss LSM/CZI, Prairie View, and ScanImage.  ScanImage, use bAlignBatch  Zeiss, use bFolder2MapManager  Prairie, use bPrairie2tif1. Open and initialize Map ManagerImportant. Map Manager will only work with Igor Pro 6. Please make sure you have Igor Pro 6 or download a trial version of Igor Pro 6.3.  Open Igor Pro with MapManager.ipf  Click on the empty command window to activate Map Manager and its menus  Open the stack browser window with menu ‘MapManager - Stack Browser’.  Open the time-series window with menu ‘MapManager - Time series’.2. Make a new mapIn the time-series window ‘Map Making’ tab  Enter a new map name.  Set the number of channels for each stack in your map  Create a new map with ‘New Map’.2.1 Appending stacks to your map  In the stack browser, select the stack you want to append to a map. If your stacks have more than one color channel, you can select any of the color channels.  In the time-series panel ‘Map Making’ tab, press ‘Append Stack’ button.  Repeat for each stack you want in your map.Important  Number of channels is important. When you make a map, you need to choose the ‘Number Of Channels’. Map Manager will only allow one choice of ‘Number Of Channels’ per map. You cannot mix stacks with different numbers of channels within a map.  Stack scale is important. Make sure the scale of each imported stack is correct. It is hard to change the scale later. If you use the provided Fiji plugins this should be taken care of. If necessary, set the scale of a stack in its stack window with shift+p.  The order of stacks is important. Make sure the timepoints in your map are imported in the correct order. It is hard to change the order later.2.2 Saving a mapSave the map with ‘Save Map’ button. New maps are saved to a default hard-drive folder specified in the Hard Drive Paths panel.2.3 Opening a mapOpen a Map Manager map using the ‘Open Map’ button in the time-series panel. When you open a map named ‘mymap’, you need to open the file ‘mymap.ipf’.2.4 Congratulations, you just made a Map Manager map.The rest of this workflow covers tracing dendritic segments, adding spines, and connecting spines across timepoints. Before you do any of this, play with the stacks in your map. From the time-series window, open a run of stacks by right-clicking on a session and selecting ‘Plot Run +- 1’.3. Create dendritic tracingsDendritic tracings are specified with control points and then fit using a custom Fiji plugin. Before fitting a line in Fiji, you need to specify the path to your Fiji application in the Hard Drive Paths panel.  Open a stack window. In the time-series panel, double-click the first session in your map.  Create a line segment. See instruction in stack annotations ‘Creating and editing line segments’.          Turn on the ‘Segment’ edit checkbox.      Click the ‘+’ button to create a new (empty) segment.      Create Control Points along a segment with shift+click. Remember, all points are in 3D, make sure the control points are in the center of the segment and in the correct imaging plane. Ctrl+mouse wheel to zoom, click+drag to pan.      Delete control points with right-click menu ‘Delete’.      Move control points with right-click menu ‘Move’.      Once control points are made, fit the backbone line in Fiji. Right-click on your segment in the list and select ‘Make from control points - Fiji’.        Repeat steps # 1 and # 2 for each session in your map. Making the same line segment in each session. As you make control points, be sure they are in the same direction along the segment for each session.  Set a pivot point in each line segment. Click a point in the segment, right-click and select ‘Set As Segment Pivot’ menu.Pivot Points. The pivot point in each segment should refer to the same region of the segment across all session. A good strategy is to choose a region of the segment near an obvious spine that is present in all sessions. Another strategy is to choose a pivot point where some other segment (dendrite) crosses near your segment as these tend to remain stable across time. Try and put the pivot point near the center of the segment, do not place it at either end. The pivot point is used to calculate a line distance along the segment (in um) which in turn will be used to auto-guess connections between spines across sessions.Tip. When specifying control points and setting segment pivots, you can open multiple stack windows at the same time. Just double-click on each session in the time-series panel. This way, you can see the line segments you are making in each session of your map.4. Connect your line segments together  Close all stack windows using the Close Windows button in the time-series panel.  Open a new stack run by right-clicking a session in your map and selecting the ‘Plot Run +- All’ menu.  Turn on the ‘Segments’ edit checkbox in the left control bar of a stack window. Open the left control bar with keyboard [.  Sequentialy connect your line segment from one timepoint to the next          Select the source timepoint segment (for example, timepoint 1). Make sure you select a point on the segment backbone line.      Select the destination timepoint segment (for example, timepoint 2). Again, make sure you select a point on the segment backbone line.      In the destination timepoint window (e.g. timepoint 2), press keyboard p for persistent (or use right-click menu ‘Dynamics - Make Object Persistent’).      Tip. You can see how your segments are connected by plotting a &#39;Segment Map&#39; from the time-series panel. In the segment map window, right-click a segent and select &#39;Plot Run&#39; to plot a run of segments.5. Mark spines in each timepoint  Open a single timepoint stack window by double clicking a session in the time-series window.  Make sure ‘Segments’ edit checkbox is off.  See stack annotations to mark spines along your new segment.          Select the segment to add a spine to by selecting it in the list of segments or single click a point along the tracing (in the image).      Create a spine with shift+click. The spine should be marked at the membrane limit of the spine head, somewhere near the tip of the spine. Remember, all points are in 3D, take care in creating the spine in the correct image plane.      Move a spine with right-click ‘Move’.      Delete a spine with right-click ‘Delete’ or keyboard delete.      All spines are automatically connected to the dendritic segment with a line. Edit the connection point with right-click ‘Manual Connect’.      Tip. Be very liberal in your scoring, mark anything you think might be a spine. All annotations can be flagged as &#39;bad&#39; using the right-click menu &#39;bad&#39;. Bad objects stay in the database but are **not** included in the final analysis. As your datasets grow, marking putative spines with an annotation and then as bad allows you to return to a given image stack and see you already decided **not** to include a putative spine in your analysis.6. Edit the dynamics of annotations between timepoints6.1 Editing annotation dynamics manually from a run plotOpening a run plot  Open an object map from the time-series panel ‘Object Map’ button  In the object map, right-click an annotation and select ‘Plot Run +` 1’.  In a stack window in the run, control+click an annotation to snap all stacks in the run to the same image position. This will also automatically select all annotations that are persistent with the one you control+clicked.  Once a spine is selected, use ctrl+left arrow and ctrl+right arrow to select the next spine along the tracing. As you do this, the other stack windows in the run will snap to the same image position and automatically select spines that have been marked as persistent.Editing dynamics in a run plot  Mark an annotation as addition. Select the annotation and press keyboard a.  Mark an annotation as subtraction. Select the annotation and press keyboard s.  Mark two annotations as persistent. Select the annotation in the source timepoint, then select the desired annotation in the destination timepoint. In the destination timepoint, press keyboard p.As you edit the dynamics between annotations, all connections are automatically maintained. For example, marking an annotation as addition will automatically disconnect it from any previous annotation it was marked as persistent with.Before you make any edits to an annotation, it is both added and subtracted by default (e.g. transient). Annotations in the first timepoint can never be marked as added. Likewise, annotations in the final timepoint can never be marked as subtraction.6.2 Editing annotation dynamics with Find PointsWARNING: As of 20171023, the interface to find point is a bit brokenThe dynamics of annotations can be edited using the Find Points panel. This is done pair-wise between timepoints. For example, if your map has 4 sessions, you will use Find Points first between session 1 and 2, then between sessions 2 and 3, and finally between sessions 3 and 4.The Find Points panel will generate an automatic guess for the best connections and allow you to set them manually. This automatic guess is using the pivot point in your dendritic segment, if this pivot point does not correspond to a similar region of the segment between timepoints, the guess will be incorrect.  Close all stack windows with ‘Close Windows’ button in time-series panel.  Open the Find Points Pane by right-clicking the first session in your map and selecting ‘Find Points’.  In the Find Points panel, you are given a list of all annotations in the source timepoint. Click on a spine in the list and Find Points will open both the source and destination timepoints, zoomed onto that spine.This is the core of Map Manager and you will spend most of your time doing this.7. Curating your connected objects7.1 Review your work by using search to query all addition, subtraction and transient  Open the search panel from the time-series panel with the ‘Search’ button.  Search for added annotations with the ‘Addition’ button. The ‘Addition’ button is in the ‘Map’ tab.  All added annotations will appear as a list in the search results.  Right-click on an annotation and select ‘plot run +- 1’ to bring up a spine run.  Visually check that you agree the annotation is an addition and edit if necessary. Once you are in a run plot, you can always add and delete annotations, and edit the dynamics manually.  Do the same by searching for ‘Subtraction’ and then ‘Transient’7.2 Browse the connections visually and edit as necessaryThis is a repeat of what we already described aboveYou need to verify the connectivity of annotations between all timepoints in the map. If your map has 4 timepoints, you need to verify the annotation connections between timepoint 1-2, timepoint 2-3, and timepoint 3-4.  Open a run plot of three sequential timepoints by right-clicking a spine in the object map and selecting ‘plot run +- 1’. Open an object map with the ‘Object Map’ button in the time-series panel.  In the run plot windows, select an annotation in the middle timepoint with ctrl+click. This will snap and zoom the annotations and its associated connections in all windows of the run plot. If there is no annotation in a given timepoint, the image will be snapped to where the annotation ‘would-be’. This is using segment pivot points, if they are not specified or poorly marked, this snapping will not work.  From the middle timepoint spine selection, go to the next spine along the segment using keyboard ctrl+right arrow. Go to the previous spine along the segment using keyboard ctrl+left arrow.  Correct any errors in the spine dynamics using keyboard a for addition, s for subtraction, and p for persistence. See run plot for details.There are many many more features  See reports for details on generating reports of spine density and dynamics.  See intensity for details on spine intensity analysis.",
      "url": "/making-a-map",
      "author": "",
      "category": "workflow",
      "date": "Apr 2015"
    }
    ,
  

    "layout-panel": {
      "title": "Layout panel",
      "content"	 : "The layout panel provides an interface to tweak Igor plots.",
      "url": "/layout-panel",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "contrast-panel": {
      "title": "Contrast panel",
      "content"	 : "Open the contrast panel with the main Map Manager menu ‘MapManager - Contrast’The contrast panel provides an interface to set global display parameters for a stack. The values specified in this panel will be used each time a new stack window is opened.These values are saved when options are saved in the Map Manager Options Panel or the main Map Manager menu ‘MapManager - Save Options…’..",
      "url": "/contrast-panel",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "stack-browser": {
      "title": "Stack Browser",
      "content"	 : "The stack browser is the main starting point for using Map Manager. The stack browser provides an interface to load and browse folders of .tif stacks.The list on the left is a list of loaded folders. Select a folder (on the left) and the list on the right will show the individual stacks within that folder. Double click a stack to open a stack window.Loading stacksLoad Tiff FolderLoad a folder of single channel .tif files from hard-drive. If these .tif files have been converted with one of the Map Manager Fiji plugins, the voxel size, date, and time should be correctly set.ScanImage ImportThe Load ScanImage Folder loads a folder of ScanImage .tif stacks.Important. When importing ScanImage .tif files, the scale is not set by ScanImage. You need to calculate your x/y voxel size (in um per voxel) when you scan at 1x magnification with 1024 by 1024 pixels. You then set this value in &#39;2p um/pixel (1024@1x)&#39;. Map Manager will use this value to calculate each stacks x/y scale for arbitrary ScanImage zoom settings.Drag and dropA simplest way to load a single stack is to drag and drop a .tif file onto the Igor program icon. Stacks opened in this way will appear in a special folder (in the list on the left) called ‘DragAndDrop’.Tip. The order of stacks can be sorted by selecting columns in the stack list. To sort by date, select &#39;Date&#39; in the columns header. This ordering is critical when batch importing a list of stacks into a Map Manager map.Browsing loaded data  Select a loaded folder (on the left) and the stacks in that folder will be shown (on the right).  Double click a stack to open a stack window.Right-click a folder for a context menu      Unload Folder. Unload the folder and all its stacks.        Stack Report (all stacks).        Segment Report (all stacks). Generate a segment report for all stacks.        View Database (all stacks). Generate a table with all analysis. This can be copied and pasted into other programs for analysis.        Intensity Analysis (all stacks). Analyze the intensity of all stacks in the folder. It is critical that each spine in the analysis is checked manually. Please see [Intensity Analysis][intensity].        Save all stacks. Will save the annotations for all ‘dirty’ stacks in a folder. Dirty stacks are stacks that have been changed or modified since they were loaded. Dirty stacks are noted in the stack list with a red background in the ‘D’ column.        Unload all stacks. Unload the raw image data for all stacks in the list.        Show Folder On Disk. Open the hard-drive folder the folder was originally loaded from. This opens a Finder window on OSX and an Explorer window on Microsoft Windows.        Refresh List. To refresh the list of folders and the selected folder’s list of stacks. This is generally not needed.  Right-click a stack for a context menuRight-click a stack to open a contextual menu. These menu items can also be triggered using the indicated keyboard shortcuts.      Display Stack. Open a [stack][stack] window. Same as double-click.        Unload Stack. Unload the raw data for a stack. Important, this unloads the raw data to conserve memory, it DOES NOT unload the stack annotations.        Unload Stack DB.        Stack Info.        Stack Report.        Segment Report. Generate a segment report for all segments in a stack. See reports.        View Database. Open a text table with all annotations in the stack. This can be copied and pasted into other programs for analysis.        Experimental - Segment Length Plot. Make both 2D and 3D plots of segment length as a function of the Z-Smoothing parameter.  Right-click headers in the stack list for a context menuThis menu will toggle the columns that are displayed in the stack list. These setting are saved with the main Map MAnager Options.What is next?Once a folder of .tif stacks is loaded  Start scoring single timepoint stacks following annotating a stack  Put the stacks into a time-series map following making a map",
      "url": "/stack-browser",
      "author": "",
      "category": "interface",
      "date": "Apr 2015"
    }
    ,
  

    "annotating-a-stack": {
      "title": "Annotating a stack",
      "content"	 : "This describes a workflow for annotating 3D annotations in a single stack. To annotate a timeseries of stacks, please see making a map.1. Open and initialize Map Manager  Open Map Manager in Igor Pro (double-click the MapManager.ipf file).  Click in the Igor Pro command window to compile (the command window is titled ‘Untitled’).  Open the Stack Browser window by selecting the main menu ‘MapManager - Stack Browser’.2. Load a stackLoad a folder of .tif files in the Stack Browser using the ‘Load Tiff Folder’ button.You need to set the proper X/Y/Z stack scale, in um, with keyboard shift+p. This is a critical step in Map Manager as many measurements are made using um. Once annotations are created the scale can not be changed.3. Display a stackOnce a stack is loaded in the Stack Browser, double-click on its name in the list to display the stack in a stack window.4. Add 3D annotations  In a stack window, open the annotation toolbar with keyboard [.  Add a new 3D annotation with shift+click.  Delete an annotation by selecting the point (single left-click) and hitting keyboard delete or backspace.  Each annotation can have a textual note, select the annotation and press keyboard n to enter a note. Notes can then be searched using the search panel.  See stack annotations for more information.5. Saving and loading annotations  Save stack annotations using the ‘Save Stack’ button.  The next time a folder of .tif files is opened, the annotations for each stack will automatically be opened6. Generating reportsMap Manager provides tabular reports for annotation density. See reports.7. Searching annotationsOpen the Search panel from the main menus ‘Map Manager - Search’.The search panel will search all annotations in a stack and return a list of annotations. Once generated, clicking on an annotation in the search results will display the annotation in the stack window.Different types of searches are performed with buttons:  All : Generate a list of all annotations in a stack.  Notes : Generate a list of all annotations with notes.  Close : Search for annotations that have other annotations within a 3D distance.If you zoom the stack window (ctrl+mouse wheel or keyboard +) you can snap to different points while maintaining the zoom using the search panel ‘Snap’ checkbox.The search results are a static output report. Once a search is performed, if annotations in the stack window are modified (added, deleted, moved, etc.) the search results will not be automatically updated. If the annotations are modified in the stack window, simply regnerate the search results by perform the search again.",
      "url": "/annotating-a-stack",
      "author": "",
      "category": "workflow",
      "date": "Feb 2015"
    }
    ,
  

    "buttons": {
      "title": "Buttons",
      "content"	 : "The buttons panel provides a quick interface to performing actions on stack and map plot windows.Open the buttons panel from the main menu ‘MapManager - Buttons’.The buttons panel will adjust its interface depending on the front most Map Manager window.The actions provided in the buttons panel are also available from individual map manager windows using a right mouse-click. The purpose of the buttons panel is to make these actions more accessible.",
      "url": "/buttons",
      "author": "",
      "category": "imagingcore",
      "date": "Jan 2015"
    }
    ,
  

    "stack": {
      "title": "Stack",
      "content"	 : "A stack window displays a 3D image stack, one image plane (slice) at a time.NavigatingScrollingMouse-wheel to scroll up and down through images.PanningClick and drag will pan the image. Keyboard arrow-keys will also pan.ZoomingCtrl+mouse wheel to zoom in and out. Keyboard +/- will also zoom in and out. All zooming is done by following the mouse pointer. Keyboard Enter will return image to full zoom.Selecting annotationsSingle mouse click will select an annotation. Selected annotations are highlighted in yellow. Keyboard n to edit the selected annotation note. Right-click will show context menu for selected annotation.Canceling annotation selectionKeyboard esc will cancel all selections.Image contrastThe contrast bar is used to set image contrast in a stack window. Image contrast is critical, if contrast is not set properly you may not see dim but otherwise important structures in your images. Setting the contrast does not modify the image, it is purely for display purposes.  Open the contrast bar with keyboard c or use the right-click menu  Pixel intensity values below ‘min’ will be displayed as black  Pixel intensity values above ‘max’ will be displayed as whiteHistogramThe histogram window show a histogram of pixel intensity values for each image in a stack.  Open the histogram window with keyboard h or use the right-click menu.  The histogram window shows a pixel intensity histogram for one image.  Scroll through the image in a stack (mouse-wheel) and the histogram for each image will be show.Multiple color channelsUse keyboard 1, 2, and 3 to switch between channels one, two, and three. Channels can also be selected using the right-click menu.Raw   Your browser does not support the HTML5 video elementSliding Z-Project   Your browser does not support the HTML5 video elementSliding z-projectionA sliding Z-Projection is a special stack where each image plane is replaced by a small maximal Z-Projection showing slices just above and below the image plane you are viewing.You can switch to a sliding Z-Projection just like you can switch channels. Switch to a sliding Z-Projection for channel 1 with keyboard ‘3’ and for channel 2 with keyboard ‘4’. You can also use the right-click menu to switch to the sliding z-projection view.Switch to the sliding z-projection with shift+3 or shift+4 to set the number of slices in each projection in the sliding z-projection.Tip. The keyboard keys used to switch to a sliding z-projection change depending on the number of color channels. For stacks with one color channel, they become &#39;2&#39;.For stacks with two color channels, they become &#39;3&#39; and &#39;4&#39;.For stacks with three color channels, they become &#39;4&#39;, &#39;5&#39;, and &#39;6&#39;.Maximal Z-ProjectionsOpen a maximal Z-Projection with keyboard z or use the right-click menu. This allows you to set the top and bottom slice that goes into the Z-Projection.Once the Z-Projection window is open, it behaves just like a stack window (with only one slice). For example, you can zoom with +/-, pan with arrow keys, open the contrast bar with keyboard c, view a histogram with keyboard h, and copy/paste the image to another program, etc., etc.Scale barEach stack will display a white scale bar in µm. Control the length of the scale bar in Options.Window Candy  There are five different window decorations or candy options: (i) all, (ii) none, (iii) scale, (iv) scale + scroll, and (v) something else.  Cycle different window candies with keyboard shift+c.  Set the default window candy in Options.  Note: The grid will only display when window candy is set to ‘All’ (when the stack axis are visible).Navigation windowThe navigation window opens a new window with a maximal z-projection of the stack and shows the current zoomed view as a blue square.  Right click and select ‘Navigation Window’ menu. A navigation window will be opened and your current zoomed view of the stack will be shown as a blue square.  Zoom with +/- or pan with arrow keys and the blue-square tracks what you are looking at.  The navigation window is, by default, a maximal z-projection of the entire stack.Zoom windowRight click and select ‘Zoom Window’. The zoom window will follow the mouse pointer and show a zoomed in region of the current image.Right clickRight-click on the image and you will get a contextual menu to activate the features described on this page.Copy/Paste image into other programsIgor Pro is very good at copying images to the clipboard so they can be pasted into other programs. From a stack window, copying will copy the image with all the annotations, it does not copy the contrast (top) and scoring (left) toolbars. Annotations can be hidden with t.Voxel sizeThe x/y/z voxel size of each stack is set with keyboard shift+p. Setting the correct voxel size in µm is critical as MapManager performs many calculations in µm (NOT IN PIXELS). The voxel size must be set before annotations are created. Once annotations are created, you should not change the voxel size.Keyboard commandsMap Manager makes heavy use of keyboard shortcuts. Use the right click menu to see the mapping between the function and the key. Here is a list of keyboard shortcuts. In a stack window, use keyboard shift+h to print this table.            Topic      Keyboard      Action                  Navigation                                   arrow-keys      Pan image                     +/-      Zoom image                     Enter      Full zoom image                     ]      Toggle between 2 different window sizes              Image Display                                   1      Channel 1                     2      Channel 2                     3      Sliding Z-Project - Channel 1                     4      Sliding Z-Project - Channel 2              Toolbars                                   c      Toggle contrast toolbar (top)                     [      Toggle scoring toolbar (left)              New Windows                                   h      Histogram                     z      Maximal Z-Projection                     shift+z      Maximal Z-Projection - Options                     i      Object info panel                     shift+i      Stack info panel              Voxel Size                                   shift+p      Set voxel size              Other                                   /      Start and stop movie of slices                     shift+c      Toggle 4 different window candy options                     shift+h      Print this help              Object Scoring                                   t      Toggle annotations (tracing) on and off                     b      Toggle selected object bad                     control + left arrow      Go to previous object                     control + right arrow      Go to next object              Map Run                                   l      Link window (lower case ‘l’ as in link)                     a      Make selected object addition                     s      Make selected object subtraction                     p      Make selected object persistent (requires selection in previous timepoint)      Stack annotationsSee stack annotations for details on creating and editing annotations. To easily manage annotations, open the left stack db panel with keyboard [ or use the point list panel.Selecting an annotationsingle-click, selected annotations are yellow. Cancel the selection with keyboard escNew annotationshift+click to create a new annotation. All annotations are 3D, the x/y coordinate is given by the position of the mouse cursor and the z coordinate is the currently viewed image slice.Move annotationright-click and select ‘move’ menuDelete annotationKeyboard del or right-click and select ‘delete’Point infoThe Point Info window shows information about the currently selected object.  Open the Point Info window from any stack window using keyboard i.  Use the point info window to annotate objects with text notes.",
      "url": "/stack",
      "author": "",
      "category": "imagingcore",
      "date": "Jan 2015"
    }
    
  
}