<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Map Manager : Stack</title>
        <meta name="description" content="">

        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/mapmanager/css/syntax.css">
        <link rel="stylesheet" href="/mapmanager/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <div class=no-print>

<div style="float: right;"><A HREF="search.html">Search...</A></div>

<h4>
	<a class=brand href="/mapmanager/">Map Manager</a>
    <small></small>
</h4>


<!--
<div float=right>
<a href="javascript:window.print()" float=right>print</a>
</div>
-->



</div>

                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <!-- <li><a href="/mapmanager/">Home</a></li> -->
    <BR>
    
    
        
        

        
            
                <li class=nav-header>Workflows</li>
            
            <li data-order="1"><a href="/mapmanager/getting-started">Getting started</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/making-a-map">Making a map</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/annotating-a-stack">Annotating a stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Imaging Core</li>
            
            <li data-order="3"><a href="/mapmanager/stack-annotations">Stack Annotations</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/buttons">Buttons</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/stack">Stack</a></li>
        
    
        
        

        
            
                <li class=nav-header>Interface Windows</li>
            
            <li data-order="4"><a href="/mapmanager/point-list">Point List</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/find-points-panel">Find Points</a></li>
        
            
            <li data-order="8"><a href="/mapmanager/hdd-paths">Hard Drive Paths</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/time-series-panel">Time Series</a></li>
        
            
            <li data-order="7"><a href="/mapmanager/stackdb-options-panel">Options</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/search-panel">Search</a></li>
        
            
            <li data-order="10"><a href="/mapmanager/plot-panel">Plot panel</a></li>
        
            
            <li data-order="9"><a href="/mapmanager/layout-panel">Layout panel</a></li>
        
            
            <li data-order="6"><a href="/mapmanager/contrast-panel">Contrast panel</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/stack-browser">Stack Browser</a></li>
        
    
        
        

        
            
                <li class=nav-header>Plots</li>
            
            <li data-order="1"><a href="/mapmanager/stack-plot">Stack plot</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/run-plot">Run plot</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/map-plot">Map plot</a></li>
        
    
        
        

        
            
                <li class=nav-header>Analysis</li>
            
            <li data-order="4"><a href="/mapmanager/Map-Pool">Map Pool</a></li>
        
            
            <li data-order="4"><a href="/mapmanager/Plotting">Plotting</a></li>
        
            
            <li data-order="3"><a href="/mapmanager/Algorithms">Algorithms</a></li>
        
            
            <li data-order="1"><a href="/mapmanager/reports">Reports</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/intensity">Intensity</a></li>
        
    
        
        

        
            
                <li class=nav-header>Blog Posts</li>
            
            <li data-order="2"><a href="/mapmanager/map-manager-matlab">Matlab class library</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/fiji-plugins">Fiji plugins</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/release-notes">Release Notes</a></li>
        
            
            <li data-order="5"><a href="/mapmanager/gallery">Gallery</a></li>
        
            
            <li data-order="2"><a href="/mapmanager/faq">FAQ</a></li>
        
            
            <li data-order=""><a href="/mapmanager/file-format">File format</a></li>
        
    


<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

<!--    <A HREF="search.html">Search...</A> -->

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h3>Stack
        
    </h3>
</div>

<style>

table{
    padding: 5px;
    border:1px solid #000000;
}

th{
    border:1px solid #000000;
    background-color: #dddddd;
    color: black;
}

td{
    border:1px solid #000000;
    padding: 5px;
}

#videotable {
    float: right;
    border: 0px solid #ddd;
    padding: 5px;
    /* font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; */
    /* border-collapse: collapse; */
    /* width: 100%; */
}

#videotable td, #videotable th {
    border: 0px solid #ddd;
    text-align: center;
    valign: middle
    padding: 5px;
    /* padding: 8px; */
}

#videotable tr:nth-child(even){
	/* background-color: #f2f2f2; */
}

/* #videotable tr:hover {background-color: #ddd;} */

#videotable th {
    /* padding-top: 12px; */
    /* padding-bottom: 12px; */
    text-align: center;
    background-color: #4CAF50;
    color: white;
}

</style>

<p>A stack window displays a 3D image stack, one image plane (slice) at a time.</p>

<p><img class="img-float-right" src="images/imagingcore/stack-example-spines4.png" width="350" /></p>

<h3 id="navigating">Navigating</h3>

<h4 id="scrolling">Scrolling</h4>
<p>Mouse-wheel to <strong>scroll</strong> up and down through images.</p>

<h4 id="panning">Panning</h4>
<p>Click and drag will <strong>pan</strong> the image. Keyboard <kbd>arrow-keys</kbd> will also pan.</p>

<h4 id="zooming">Zooming</h4>
<p>Ctrl+mouse wheel to <strong>zoom</strong> in and out. Keyboard <kbd>+</kbd>/<kbd>-</kbd> will also zoom in and out. All zooming is done by following the mouse pointer. Keyboard <kbd>Enter</kbd> will return image to full zoom.</p>

<h4 id="selecting-annotations">Selecting annotations</h4>
<p>Single mouse click will <strong>select</strong> an annotation. Selected annotations are highlighted in yellow. Keyboard <kbd>n</kbd> to edit the selected annotation note. Right-click will show context menu for selected annotation.</p>

<h4 id="canceling-annotation-selection">Canceling annotation selection</h4>
<p>Keyboard <kbd>esc</kbd> will <strong>cancel</strong> all selections.</p>

<div class="print-page-break"></div>

<p><br />
<br /></p>

<p><img class="img-float-right" src="images/contrast-bar.png" width="500" /></p>

<h3 id="image-contrast">Image contrast</h3>

<p>The contrast bar is used to set image contrast in a stack window. Image contrast is <span style="color:red">critical</span>, if contrast is not set properly you may not see dim but otherwise important structures in your images. Setting the contrast does not modify the image, it is purely for display purposes.</p>

<ul>
  <li>Open the contrast bar with keyboard <kbd>c</kbd> or use the right-click menu</li>
  <li>Pixel intensity values below ‘min’ will be displayed as black</li>
  <li>Pixel intensity values above ‘max’ will be displayed as white</li>
</ul>

<div class="print-page-break"></div>

<p><img class="img-float-right" src="images/imagingcore/histogram.jpg" width="350" /></p>

<h3 id="histogram">Histogram</h3>

<p>The histogram window show a histogram of pixel intensity values for each image in a stack.</p>

<ul>
  <li>Open the histogram window with keyboard <kbd>h</kbd> or use the right-click menu.</li>
  <li>The histogram window shows a pixel intensity histogram for one image.</li>
  <li>Scroll through the image in a stack (mouse-wheel) and the histogram for each image will be show.</li>
</ul>

<div class="print-page-break"></div>

<h3 id="multiple-color-channels">Multiple color channels</h3>

<p>Use keyboard <kbd>1</kbd>, <kbd>2</kbd>, and <kbd>3</kbd> to switch between channels one, two, and three. Channels can also be selected using the right-click menu.</p>

<table id="videotable">
<tr>
	<td>
	Raw<br />
	<video src="images/mm3/stack/vasc_rawstack.mov" height="240" width="240" controls="">
	   Your browser does not support the HTML5 video element
	</video>
	</td>

	<td>
	Sliding Z-Project<br />
	<video src="images/mm3/stack/vasc_zstack.mov" height="240" width="240" controls="">
	   Your browser does not support the HTML5 video element
	</video>
	</td>
</tr>
</table>

<h3 id="sliding-z-projection">Sliding z-projection</h3>

<p>A sliding Z-Projection is a special stack where each image plane is replaced by a small maximal Z-Projection showing slices just above and below the image plane you are viewing.</p>

<p>You can switch to a sliding Z-Projection just like you can switch channels. Switch to a sliding Z-Projection for channel 1 with keyboard ‘3’ and for channel 2 with keyboard ‘4’. You can also use the right-click menu to switch to the sliding z-projection view.</p>

<p>Switch to the sliding z-projection with <kbd>shift</kbd>+<kbd>3</kbd> or <kbd>shift</kbd>+<kbd>4</kbd> to set the number of slices in each projection in the sliding z-projection.</p>

<p class="tip"><b>Tip.</b> The keyboard keys used to switch to a <b>sliding z-projection</b> change depending on the number of color channels. 
For stacks with one color channel, they become '2'.
For stacks with two color channels, they become '3' and '4'.
For stacks with three color channels, they become '4', '5', and '6'.
</p>

<div class="print-page-break"></div>

<h3 id="maximal-z-projections">Maximal Z-Projections</h3>

<p>Open a maximal Z-Projection with keyboard <kbd>z</kbd> or use the right-click menu. This allows you to set the top and bottom slice that goes into the Z-Projection.</p>

<p>Once the Z-Projection window is open, it behaves just like a stack window (with only one slice). For example, you can zoom with <kbd>+</kbd>/<kbd>-</kbd>, pan with <kbd>arrow keys</kbd>, open the contrast bar with keyboard <kbd>c</kbd>, view a histogram with keyboard <kbd>h</kbd>, and copy/paste the image to another program, etc., etc.</p>

<h3 id="scale-bar">Scale bar</h3>
<p>Each stack will display a white scale bar in µm. Control the length of the scale bar in <a href="stackdb-options-panel">Options</a>.</p>

<h3 id="window-candy">Window Candy</h3>
<ul>
  <li>There are five different window decorations or <strong>c</strong>andy options: (i) all, (ii) none, (iii) scale, (iv) scale + scroll, and (v) something else.</li>
  <li>Cycle different window <strong>c</strong>andies with keyboard <kbd>shift</kbd>+<kbd>c</kbd>.</li>
  <li>Set the default window <strong>c</strong>andy in <a href="stackdb-options-panel">Options</a>.</li>
  <li>Note: The grid will only display when window <strong>c</strong>andy is set to ‘All’ (when the stack axis are visible).</li>
</ul>

<p><img class="img-float-right" src="images/imagingcore/stack_navigation.jpg" width="300" /></p>

<h3 id="navigation-window">Navigation window</h3>

<p>The navigation window opens a new window with a maximal z-projection of the stack and shows the current zoomed view as a blue square.</p>

<ul>
  <li>Right click and select ‘Navigation Window’ menu. A navigation window will be opened and your current zoomed view of the stack will be shown as a blue square.</li>
  <li>Zoom with <kbd>+</kbd>/<kbd>-</kbd> or pan with <kbd>arrow keys</kbd> and the blue-square tracks what you are looking at.</li>
  <li>The navigation window is, by default, a maximal z-projection of the entire stack.</li>
</ul>

<div class="print-page-break"></div>

<h3 id="zoom-window">Zoom window</h3>

<p>Right click and select ‘Zoom Window’. The zoom window will follow the mouse pointer and show a zoomed in region of the current image.</p>

<p><img class="img-float-right" src="images/mm3/mm3-stack-right-click.png" width="200" /></p>

<h3 id="right-click">Right click</h3>

<p>Right-click on the image and you will get a contextual menu to activate the features described on this page.</p>

<div class="print-page-break"></div>

<h3 id="copypaste-image-into-other-programs">Copy/Paste image into other programs</h3>

<p>Igor Pro is very good at copying images to the clipboard so they can be pasted into other programs. From a stack window, copying will copy the image with all the annotations, it does not copy the contrast (top) and scoring (left) toolbars. Annotations can be hidden with <kbd>t</kbd>.</p>

<p><img class="img-float-right" src="images/voxel-size-panel.png" width="350" /></p>

<h3 id="voxel-size">Voxel size</h3>

<p>The x/y/z voxel size of each stack is set with keyboard <kbd>shift</kbd>+<kbd>p</kbd>. <strong>Setting the correct voxel size in µm is critical</strong> as MapManager performs many calculations in µm (NOT IN PIXELS). The voxel size must be set before annotations are created. Once annotations are created, you should not change the voxel size.</p>

<div class="print-page-break"></div>

<h3 id="keyboard-commands">Keyboard commands</h3>

<p>Map Manager makes heavy use of keyboard shortcuts. Use the right click menu to see the mapping between the function and the key. Here is a list of keyboard shortcuts. In a stack window, use keyboard <kbd>shift</kbd>+<kbd>h</kbd> to print this table.</p>

<table>
  <thead>
    <tr>
      <th>Topic</th>
      <th>Keyboard</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Navigation</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>arrow-keys</td>
      <td>Pan image</td>
    </tr>
    <tr>
      <td> </td>
      <td>+/-</td>
      <td>Zoom image</td>
    </tr>
    <tr>
      <td> </td>
      <td>Enter</td>
      <td>Full zoom image</td>
    </tr>
    <tr>
      <td> </td>
      <td>]</td>
      <td>Toggle between 2 different window sizes</td>
    </tr>
    <tr>
      <td><strong>Image Display</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>1</td>
      <td>Channel 1</td>
    </tr>
    <tr>
      <td> </td>
      <td>2</td>
      <td>Channel 2</td>
    </tr>
    <tr>
      <td> </td>
      <td>3</td>
      <td>Sliding Z-Project - Channel 1</td>
    </tr>
    <tr>
      <td> </td>
      <td>4</td>
      <td>Sliding Z-Project - Channel 2</td>
    </tr>
    <tr>
      <td><strong>Toolbars</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>c</td>
      <td>Toggle contrast toolbar (top)</td>
    </tr>
    <tr>
      <td> </td>
      <td>[</td>
      <td>Toggle scoring toolbar (left)</td>
    </tr>
    <tr>
      <td><strong>New Windows</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>h</td>
      <td>Histogram</td>
    </tr>
    <tr>
      <td> </td>
      <td>z</td>
      <td>Maximal Z-Projection</td>
    </tr>
    <tr>
      <td> </td>
      <td>shift+z</td>
      <td>Maximal Z-Projection - Options</td>
    </tr>
    <tr>
      <td> </td>
      <td>i</td>
      <td>Object info panel</td>
    </tr>
    <tr>
      <td> </td>
      <td>shift+i</td>
      <td>Stack info panel</td>
    </tr>
    <tr>
      <td><strong>Voxel Size</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>shift+p</td>
      <td>Set voxel size</td>
    </tr>
    <tr>
      <td><strong>Other</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>/</td>
      <td>Start and stop movie of slices</td>
    </tr>
    <tr>
      <td> </td>
      <td>shift+c</td>
      <td>Toggle 4 different window candy options</td>
    </tr>
    <tr>
      <td> </td>
      <td>shift+h</td>
      <td>Print this help</td>
    </tr>
    <tr>
      <td><strong>Object Scoring</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>t</td>
      <td>Toggle annotations (tracing) on and off</td>
    </tr>
    <tr>
      <td> </td>
      <td>b</td>
      <td>Toggle selected object bad</td>
    </tr>
    <tr>
      <td> </td>
      <td>control + left arrow</td>
      <td>Go to previous object</td>
    </tr>
    <tr>
      <td> </td>
      <td>control + right arrow</td>
      <td>Go to next object</td>
    </tr>
    <tr>
      <td><strong>Map Run</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>l</td>
      <td>Link window (lower case ‘l’ as in link)</td>
    </tr>
    <tr>
      <td> </td>
      <td>a</td>
      <td>Make selected object addition</td>
    </tr>
    <tr>
      <td> </td>
      <td>s</td>
      <td>Make selected object subtraction</td>
    </tr>
    <tr>
      <td> </td>
      <td>p</td>
      <td>Make selected object persistent (requires selection in previous timepoint)</td>
    </tr>
  </tbody>
</table>

<h3 id="stack-annotations">Stack annotations</h3>
<p><a id="stack-annotations"></a></p>

<p>See <a href="stack-annotations">stack annotations</a> for details on creating and editing annotations. To easily manage annotations, open the left stack db panel with keyboard <kbd>[</kbd> or use the <a href="point-list">point list</a> panel.</p>

<h4 id="selecting-an-annotation">Selecting an annotation</h4>
<p>single-click, selected annotations are yellow. Cancel the selection with keyboard <kbd>esc</kbd></p>

<h4 id="new-annotation">New annotation</h4>
<p>shift+click to create a new annotation. <strong>All annotations are 3D</strong>, the x/y coordinate is given by the position of the mouse cursor and the z coordinate is the currently viewed image slice.</p>

<h4 id="move-annotation">Move annotation</h4>
<p>right-click and select ‘move’ menu</p>

<h4 id="delete-annotation">Delete annotation</h4>
<p>Keyboard <kbd>del</kbd> or right-click and select ‘delete’</p>

<p><img class="img-float-right" src="images/mm3/mm3-point-info.png" width="300" /></p>

<h3 id="point-info">Point info</h3>

<p>The Point Info window shows information about the currently selected object.</p>

<ul>
  <li>Open the Point Info window from any stack window using keyboard <kbd>i</kbd>.</li>
  <li>Use the point info window to annotate objects with text notes.</li>
</ul>

<div class="print-page-break"></div>



<div class="post-tags">
  
  
  
    <b>Tags:</b>  
  
  
  
    <a href="/mapmanager/tags/#Imaging core">Imaging core</a>
  

   <!--
   <a href="javascript:window.print()">print</a>
    -->

   <!--
   <BR>
   <a href="_posts/2015-01-30-stack.pdf">print pdf</a>
   <BR>
   -->
    
</div>


                    </div>
                
            </div>

            

            <div class=row-fluid>
                <div id=footer class=span12>
                      Copyright &copy; 2017 - Robert Cudmore -

 <a href="http://robertcudmore.org/index.html">robertcudmore.org</a>

<!--
Documentation for <a href="https://github.com/cudmore/mapmanager">Map Manager</a>
-->
                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                    
                    //console.log(order, li);
                }

                //20160327 removed, this was no doing anything???
                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    //console.log(section);
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
